(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{29:function(e){e.exports={name:"subcalc-pr",version:"3.0.0-beta.1",homepage:"./",private:!0,dependencies:{"@mojotech/json-type-validation":"^3.1.0",classnames:"^2.2.6","js-file-download":"^0.4.4","node-sass":"^4.11.0",primeicons:"^1.0.0",primereact:"^3.0.0-rc.1",react:"^16.6.0","react-dom":"^16.6.0","react-json-view":"^1.19.1","react-scripts":"^2.1.3","react-transition-group":"^2.5.3","typescript-map":"0.0.7"},scripts:{start:"react-scripts start",build:"react-scripts build",test:"react-scripts test --env=jsdom",eject:"react-scripts eject"},devDependencies:{"@types/jest":"23.3.9","@types/node":"10.12.1","@types/react":"16.4.18","@types/react-dom":"16.0.9",typescript:"3.1.5"},browserslist:[">0.2%","not dead","not ie <= 11","not op_mini all"]}},30:function(e,t,n){e.exports=n(70)},55:function(e,t,n){},68:function(e,t,n){},70:function(e,t,n){"use strict";n.r(t);var a,s=n(0),o=n(12),r=n(10),i=n(2),c=n(3),u=n(5),l=n(4),d=n(6),h=n(1),m=n(13),p=n(25);n(49),n(51),n(53),n(55);function g(e){if(v()){for(var t,n=arguments.length,a=new Array(n>1?n-1:0),s=1;s<n;s++)a[s-1]=arguments[s];(t=console).log.apply(t,[e].concat(a))}}function b(e){a?a(e.message):alert(e.message);for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];g.apply(void 0,[e].concat(n))}function v(){return window._tg_debug}function f(){return{app:window._tg_app||"",version:window._tg_version||"",build:window._tg_build||""}}function w(){return Boolean(window._tg_app)}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return void 0==e?t:e}function S(){return Math.floor(1e6*Math.random())}function E(){return(new Date).toTimestampString()}function C(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text/plain";if("undefined"!==typeof window.navigator.msSaveBlob){var a=new Blob([e],{type:n||"application/octet-stream"});window.navigator.msSaveBlob(a,t)}else{var s=document.createElement("a");s.setAttribute("href","data:".concat(n,";charset=utf-8,")+encodeURIComponent(e)),s.setAttribute("download",t),s.style.display="none",document.body.appendChild(s),s.click(),document.body.removeChild(s)}}String.prototype.trim=function(){for(var e=this.replace(/^\s+/,""),t=e.length-1;t>=0;t--)if(/\S/.test(e.charAt(t))){e=e.substring(0,t+1);break}return e},String.prototype.hashCode=function(){var e=0;if(0===this.length)return e;for(var t=0;t<this.length;t++){e=(e<<5)-e+this.charCodeAt(t),e|=0}return e},String.prototype.toDate=function(){return new Date(String(this))},String.prototype.csvQuoted=function(){return'"'+this.replace(/"/g,'""')+'"'},Number.prototype.toCommaString=function(){return this.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},Number.prototype.singularPlural=function(e,t,n){var a="no number"!=n?"".concat(this," "):"";return"".concat(a).concat(1==this?e:t)},Number.prototype.comparisonValue=function(){return this<0?-1:this>0?1:0},Number.prototype.decimalPlaces=function(e){var t=Math.pow(10,e);return Math.round(Number(this)*t)/t},Array.prototype.pushUnique=function(e){return-1===this.indexOf(e)&&this.push(e),this},Array.prototype.max=function(){return this.reduce(function(e,t){return Math.max(e,t)})},Date.prototype.toTimestampString=function(){return this.toJSON()};var N=n(7),O=n(15),k=function e(t){var n=this;Object(i.a)(this,e),this.debug=function(){return"".concat(n.name," (").concat(n.count,")")},this.id=void 0,this.name=void 0,this.count=void 0,this.delegates=void 0,this.recreate=function(){return new e({id:n.id,with:{name:n.name,count:n.count,delegates:n.delegates}})},this.toJSON=function(){return{name:n.name,count:n.count}},this.fromJSON=function(t){var a=e.decoder.run(t);a.ok?(n.name=a.result.name,n.count=a.result.count,n.delegates=a.result.delegates||0):g(a.error)},this.defaultName=function(){return"Subcaucus ".concat(n.id)},this.displayName=function(){return n.name||n.defaultName()},this.viability=0,this.baseDelegates=0,this.remainder=0,this._tosses=[],this.reportTosses=!1,this.clearDelegateInfo=function(){n.delegates=0,n.viability=0,n.baseDelegates=0,n.remainder=0,n.reportTosses=!1,n._tosses=[]},this.setViability=function(e){n.viability=e;var t=n.count/n.viability;n.baseDelegates=Math.floor(t),n.delegates=n.baseDelegates,n.remainder=t-n.baseDelegates},this.coinToss=function(e,t){n._tosses.push({won:e,against:t})},this.tosses=function(){if(!n.reportTosses)return[];var e={};return n._tosses.forEach(function(t){e[String(t.against.id)]=t}),Object.keys(e).map(function(t){return e[t]})},this.addRemainderDelegate=function(){n.delegates++},this.asText=function(){var e="";return n.name||n.count?(e+=n.displayName()+": ",e+=n.count.singularPlural("member","members"),0===n.delegates?e+=" in a non-viable subcaucus.":(e+=" may elect "+n.delegates.singularPlural("delegate","delegates"),n.remainder&&(e+=" (",n.remainder&&(e+="remainder "+n.remainder.decimalPlaces(3)),n.tosses().forEach(function(t){e+=", "+(t.won?"won":"lost")+" vs "+t.against.displayName()}),n.delegates>n.baseDelegates&&(e+=", awarded a remainder delegate"),e+=")"),e+".")):e},this.asCSV=function(){var e=n.displayName().csvQuoted();return n.name||n.count?(e+=","+n.count,e+=","+n.delegates,e+=","+n.remainder,e+=","+n.tosses().map(function(e){return(e.won?"won":"lost")+" vs "+e.against.displayName()}).join(", ").csvQuoted(),e+=","+(n.delegates-n.baseDelegates)):""},this.id=t.id,this.name="",this.count=0,this.delegates=0,t.with&&(this.name=t.with.name||this.name,this.count=t.with.count||this.count,this.delegates=t.with.delegates||this.delegates),t.json&&this.fromJSON(t.json)};k.decoder=Object(N.c)({name:Object(N.e)(),count:Object(N.b)(),delegates:Object(N.d)(Object(N.b)())});var j=function e(t,n){var a=this;Object(i.a)(this,e),this.mod1=4294967087,this.mul1=65539,this.mod2=4294965887,this.mul2=65537,this.state1=0,this.state2=0,this.record=[],this.randomUpTo=function(e){if(e=Math.abs(Math.floor(e)),a.state1=a.state1*a.mul1%a.mod1,a.state2=a.state2*a.mul2%a.mod2,a.state1<e&&a.state2<e&&a.state1<a.mod1%e&&a.state2<a.mod2%e)return a.randomUpTo(e);var t=(a.state1+a.state2)%e;return a.record.push({limit:e,result:t}),t},this.random=function(){return a.randomUpTo(4294965885)/4294965885},this.randomComparison=function(){return a.randomUpTo(2)?-1:1},this.recordSummary=function(){var e={};return a.record.forEach(function(t){var n=e[String(t.limit)];void 0===n&&(n={}),void 0===n[String(t.result)]?n[String(t.result)]=1:n[String(t.result)]++,e[String(t.limit)]=n}),e},this.state1=Math.abs(Math.floor(Number(t))),this.state2=Math.abs(Math.floor(Number(n))),(isNaN(this.state1)||this.state1<1)&&(this.state1=Number(new Date)),(isNaN(this.state2)||this.state2<1)&&(this.state2=this.state1),this.state1=this.state1%(this.mod1-1)+1,this.state2=this.state2%(this.mod2-1)+1},D=function e(t){var n=this;Object(i.a)(this,e),this.debugID=" ------ ".concat((window._tg_counter=window._tg_counter||1,window._tg_counter++)," ------ "),this.debug=function(){return"\nSnapshot"+n.debugID+"\n"+n.name+"/"+n.revision+"/"+n.allowed+" "+n.subcaucuses.map(function(e){return e.debug()}).join(", ")},this.created=void 0,this.device=void 0,this.revised=void 0,this.revision=void 0,this.name=void 0,this.allowed=void 0,this.seed=void 0,this.subcaucuses=void 0,this.recreate=function(){var t=new O.TSMap;return n.subcaucuses.forEach(function(e){t.set(e.id,e.recreate())}),new e({device:n.device,created:n.created,with:{revised:n.revised,revision:n.revision,name:n.name,allowed:n.allowed,seed:n.seed,subcaucuses:t}})},this.toJSON=function(){return{created:n.created,device:n.device,revised:n.revised,revision:n.revision,name:n.name,allowed:n.allowed,seed:n.seed,subcaucuses:n.subcaucuses.toJSON()}},this.fromJSON=function(t){var a=e.decoder.run(t);a.ok?(n.created=a.result.created,n.device=a.result.device,n.revised=a.result.revised,n.revision=a.result.revision,n.name=a.result.name,n.allowed=a.result.allowed,n.seed=a.result.seed,n.subcaucuses=new O.TSMap,Object.keys(a.result.subcaucuses).forEach(function(e){var t=a.result.subcaucuses[e],s=Number(e);n.subcaucuses.set(s,new k({id:s,json:t}))})):g(a.error)},this.revise=function(e){n.revised=E(),n.revision="",e&&(e.name&&(n.name=e.name),e.allowed&&(n.allowed=e.allowed),e.seed&&(n.seed=e.seed)),n.redistributeDelegates()},this.clearCounts=function(){n.revised=E(),n.revision="",n.subcaucuses.forEach(function(e){e.count=0}),n.redistributeDelegates()},this.participants=0,this.totalDelegates=0,this.participantsPerDelegate=0,this.viabilityNumber=0,this.viableParticipants=0,this.delegateDivisor=0,this.redistributeDelegates=function(){if(g("Distributing delegates"),n.allowed){var e=n.subcaucuses.values();if(e.forEach(function(e){return e.clearDelegateInfo()}),n.participants=e.reduce(function(e,t){return e+t.count},0),n.participants){n.participantsPerDelegate=n.participants/n.allowed,n.viabilityNumber=Math.ceil(n.participantsPerDelegate);var t=e.filter(function(e){return e.count>=n.viabilityNumber});if(n.viableParticipants=t.reduce(function(e,t){return e+t.count},0),n.viableParticipants){n.delegateDivisor=n.viableParticipants/n.allowed,t.forEach(function(e){return e.setViability(n.delegateDivisor)}),n.totalDelegates=t.reduce(function(e,t){return e+t.baseDelegates},0);for(var a=new j(n.seed),s=t.map(function(e){return e.id}),o=s.length;o;){var r=a.randomUpTo(o--),i=s[o];s[o]=s[r],s[r]=i}t.sort(function(e,t){if(e.remainder>t.remainder)return-1;if(e.remainder<t.remainder)return 1;var n=s.indexOf(e.id)<s.indexOf(t.id)?-1:1;return e.coinToss(-1===n,t),t.coinToss(1===n,e),n});var c=-1,u=[],l=!1;t.forEach(function(e){n.totalDelegates<n.allowed?(n.totalDelegates++,e.addRemainderDelegate(),l=!0,c!=e.remainder&&(u=[],c=e.remainder),u.push(e)):(c==e.remainder?u.push(e):(l&&(u=[]),c=-1),l=!1)}),u.forEach(function(e){e.reportTosses=!0}),console.log("random summary",a.recordSummary())}}}},this.meetingKey=function(){return"".concat(n.created," ").concat(n.device)},this.snapshotKey=function(){return"".concat(n.created," ").concat(n.device," ").concat(n.revised)},this.nextSubcaucusID=function(){return 0===n.subcaucuses.length?1:Math.max.apply(Math,Object(r.a)(n.subcaucuses.keys()))+1},this.addSubcaucus=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=n.nextSubcaucusID();n.subcaucuses.set(s,new k({id:s,with:{name:e,count:t,delegates:a}}))},this.deleteSubcaucus=function(e){n.subcaucuses.delete(e)},this.asText=function(){var e="";e+="".concat(n.name," ").concat(n.revision?"(".concat(n.revision,") "):"","was allowed ").concat(n.allowed.singularPlural("delegate","delegates"),".\n\n"),n.participants>0?(n.subcaucuses.forEach(function(t){var n=t.asText();e+=n?n+"\n\n":""}),e+="".concat(n.participants.singularPlural("person was","people were")," participating, the initial viability number was ").concat(n.viabilityNumber," (").concat(n.participantsPerDelegate.decimalPlaces(3)," participants per delegate).\n"),n.participants>n.viableParticipants&&(e+="".concat((n.participants-n.viableParticipants).singularPlural("person was","people were")," in a non-viable caucus, you may want to consider another round of walking.\n"),e+="The delegate divisor (number of members needed to allocate each delegate) was ".concat(n.delegateDivisor.decimalPlaces(3),".\n")),e+="\n"):e+="Nobody was participating.\n\n";var t=new Date(Date.parse(n.revised));return e+="The coin had a random seed of ".concat(n.seed,".\n"),e+="Last revised ".concat(t.toLocaleString("en-US",{timeZoneName:"short"})," \n")},this.asCSV=function(){var e=[];e.push("Subcaucus,Members,Delegates,Remainder,Coin Tosses,Remainder Delegates"),n.subcaucuses.forEach(function(t){var n=t.asCSV();n&&e.push(n)}),e.push(""),e.push("Participants,".concat(n.participants)),e.push("Delegates elected,,".concat(n.totalDelegates)),e.push("Participants per delegate,".concat(n.participantsPerDelegate)),e.push("Viability number,".concat(n.viabilityNumber)),e.push("Participants in non-viable caucuses,".concat(n.participants-n.viableParticipants)),e.push("Delegate divisor,".concat(n.delegateDivisor)),e.push("Coin random seed,".concat(n.seed)),e.push(""),e.push("Meeting,".concat(n.name.csvQuoted())),e.push("Revision,".concat(n.revision.csvQuoted()));var t=new Date(Date.parse(n.revised));return e.push("Revised,".concat(t.toLocaleString("en-US",{timeZoneName:"short"}).csvQuoted())),e.join("\r\n")},this.created=t.created,this.device=t.device,this.revised=E(),this.revision="",this.name="",this.allowed=0,this.seed=S(),this.subcaucuses=new O.TSMap,t.with&&(this.revised=t.with.revised||this.revised,this.revision=t.with.revision||this.revision,this.name=t.with.name||this.name,this.allowed=t.with.allowed||this.allowed,this.seed=t.with.seed||this.seed,t.with.subcaucuses&&(this.subcaucuses=t.with.subcaucuses)),t.json&&this.fromJSON(t.json)};D.decoder=Object(N.c)({device:Object(N.b)(),created:Object(N.e)(),revised:Object(N.e)(),revision:Object(N.e)(),name:Object(N.e)(),allowed:Object(N.b)(),seed:Object(N.b)(),subcaucuses:Object(N.a)(k.decoder)});var B=function e(t){var n=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"subcalc";Object(i.a)(this,e),this.snapshot=void 0,this.saved=[],this.device=void 0,this.sleep=function(e){for(var t=(new Date).getTime();(new Date).getTime()<t+e;);},this.read=function(t){var a;w()&&n.sleep(2e3);try{a=JSON.parse(localStorage.getItem(t)||"false")}catch(o){return void g(o)}if(a){var s=e.decoder.run(a);s.ok?(n.snapshot=n.snapshotFromCaucus(s.result.current),n.snapshot.revision="Latest",n.saved.push(n.snapshot),Object.keys(s.result.saved).forEach(function(e){s.ok&&n.saved.push(n.snapshotFromCaucus(s.result.saved[e].caucus,s.result.saved[e].saved))})):g(s.error)}else g("No subcalc 1 data found")},this.snapshotFromCaucus=function(e,t){var a=t?new Date(t).toTimestampString():new Date(e.seed).toTimestampString(),s=new D({device:n.device,created:new Date(e.seed).toTimestampString(),with:{name:"Imported from "+new Date(e.seed).toLocaleDateString(),allowed:e.allowed,revised:a,revision:e.precinct}});return Object.keys(e.members).forEach(function(t){s.addSubcaucus(e.names[t],e.members[t])}),s},this.device=t,this.read(a)};B.caucusDecoder=Object(N.c)({allowed:Object(N.b)(),precinct:Object(N.e)(),seed:Object(N.b)(),names:Object(N.a)(Object(N.e)()),members:Object(N.a)(Object(N.b)())}),B.decoder=Object(N.c)({current:B.caucusDecoder,saved:Object(N.a)(Object(N.c)({caucus:B.caucusDecoder,saved:Object(N.b)()}))});var I=n(26),T=function e(){var t=this;Object(i.a)(this,e),this.debug=function(){return t.snapshot.debug()},this.version=2,this.device=void 0,this.snapshot=void 0,this.incoming=[],this.storedSnapshotPrefix="sc-save",this.trashedSnapshotPrefix="sc-trash",this.storedSnapshotKey=function(e){return void 0===e&&(e=t.snapshot),"".concat(t.storedSnapshotPrefix," ").concat(e.snapshotKey())},this.snapshots=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"saved",n=[],a=localStorage.length,s="saved"===e?t.storedSnapshotPrefix:t.trashedSnapshotPrefix,o=0;o<a;o++){var r=localStorage.key(o);if(!r)break;if(r.startsWith(s)){var i=t.readSnapshot(r);i&&n.push(i)}}return n},this.setSnapshot=function(e){return t.snapshot=e.recreate(),t.write(),t.snapshot},this.newSnapshot=function(){var e=E(),n=new D({device:t.device,created:e});return n.addSubcaucus(),n.addSubcaucus(),n.addSubcaucus(),t.setSnapshot(n),t.snapshot},this.duplicateSnapshot=function(){return t.snapshot.created=E(),t.snapshot.name="Copy of ".concat(t.snapshot.name),t.snapshot.revised=t.snapshot.created,t.snapshot.revision="",t.setSnapshot(t.snapshot),t.snapshot},this.write=function(){var e={v:t.version,device:t.device,snapshot:t.snapshot.toJSON()};try{var n=JSON.stringify(e);g("storing subcalc2",n),localStorage.setItem("subcalc2",n)}catch(a){b(new Error("Failed to save subcalc2 to local storage"),a)}},this.writeSnapshot=function(e){if(e||(e=t.snapshot),e===t.snapshot&&t.write(),e.revision){var n=t.storedSnapshotKey(e),a=e.toJSON();try{var s=JSON.stringify(a);g("storing ".concat(n),s),localStorage.setItem(n,s)}catch(o){return void b(new Error("Error saving ".concat(n," to local storage")),o)}}else e!=t.snapshot&&b(new Error("Snapshot was not saved."),e)},this.reviseSnapshot=function(e,n){n||(n=t.snapshot),n.revise(e),t.writeSnapshot()},this.zeroSubcaucuses=function(){t.snapshot.clearCounts(),t.writeSnapshot()},this.saveSnapshot=function(e){t.snapshot.revision=e,t.writeSnapshot()},this.renameMeeting=function(e){t.snapshot.name=e,t.write();var n=t.snapshot.meetingKey();t.snapshots().forEach(function(a){a.meetingKey()===n&&(a.name=e,t.writeSnapshot(a))})},this.trashSnapshot=function(e){var n=e.snapshotKey(),a=localStorage.getItem("".concat(t.storedSnapshotPrefix," ").concat(n));a?(localStorage.removeItem("".concat(t.storedSnapshotPrefix," ").concat(n)),localStorage.setItem("".concat(t.trashedSnapshotPrefix," ").concat(n),a)):b(new Error("Could not find ".concat(t.storedSnapshotPrefix," ").concat(n)))},this.emptyTrash=function(){t.snapshots("trashed").forEach(function(e){var n=e.snapshotKey();localStorage.removeItem("".concat(t.trashedSnapshotPrefix," ").concat(n))})},this.read=function(){var n;try{n=JSON.parse(localStorage.getItem("subcalc2")||"false")}catch(o){return void g(o)}if(n){var a=e.decoder.run(n);a.ok?(t.version!==a.result.v&&g("Expected subcalc version ".concat(t.version,", got ").concat(a.result.v)),t.device=a.result.device,t.snapshot=new D({device:a.result.snapshot.device,created:a.result.snapshot.created,json:a.result.snapshot})):g(a.error)}else{var s=new B(t.device);s.snapshot&&(t.snapshot=s.snapshot,t.write(),s.saved.forEach(function(e){t.writeSnapshot(e)})),!t.snapshot&&t.incoming.length>0&&t.completeIncoming()}},this.readSnapshot=function(e){return t.decodeSnapshot(localStorage.getItem(e)||"false")},this.decodeSnapshot=function(e){var t;try{t=JSON.parse(e)}catch(a){return void g(a)}var n=D.decoder.run(t);if(n.ok)return new D({created:n.result.created,device:n.result.device,json:n.result});g(n.error)},this.decodeSnapshots=function(e){var t,n=[];try{t=JSON.parse(e)}catch(a){g(a)}return Object(I.isArray)(t)&&t.forEach(function(e){var t=D.decoder.run(e);t.ok?n.push(new D({created:t.result.created,device:t.result.device,json:t.result})):g(t.error)}),n},this.decodeCaucus=function(e){var n;try{n=JSON.parse(e)}catch(r){return void g(r)}var a=B.caucusDecoder.run(n);if(a.ok){var s=new Date(a.result.seed),o=new D({device:t.device,created:s.toTimestampString(),with:{name:"Imported from "+s.toLocaleDateString(),allowed:a.result.allowed,revised:s.toTimestampString(),revision:a.result.precinct||"via link"}});return Object.keys(a.result.members).forEach(function(e){o.addSubcaucus(a.result.names[e],a.result.members[e])}),o}g(a.error)},this.completeIncoming=function(){t.snapshot=t.incoming[0],t.write(),t.incoming.forEach(function(e){t.writeSnapshot(e)}),t.incoming=[]},this.clear=function(){localStorage.clear(),t.newSnapshot(),t.write()},this.query=function(){var e=localStorage.getItem("query");if(e){g("found query");var n=new URLSearchParams(e),a=decodeURIComponent(n.get("caucus")||""),s=decodeURIComponent(n.get("subcalc1")||""),o=decodeURIComponent(n.get("snapshot")||""),i=decodeURIComponent(n.get("subcalc2")||""),c=decodeURIComponent(n.get("app")||""),u=decodeURIComponent(n.get("version")||""),l=decodeURIComponent(n.get("build")||""),d=decodeURIComponent(n.get("debug")||"");if(i){var h;g("query subcalc2",i);var m=t.decodeSnapshots(i);(h=t.incoming).push.apply(h,Object(r.a)(m))}if(o){g("query snapshot",o);var p=t.decodeSnapshot(o);p&&t.incoming.push(p)}if(s){var b;g("query subcalc1",s),localStorage.setItem("incoming",s);var v=new B(t.device,"incoming");localStorage.removeItem("incoming"),(b=t.incoming).push.apply(b,Object(r.a)(v.saved))}if(a){g("query caucus",a);var f=t.decodeCaucus(a);f&&t.incoming.push(f)}c&&function(e,t,n){window._tg_app=e,window._tg_version=t,window._tg_build=n}(c,u,l),d&&(window._tg_debug=!0),localStorage.removeItem("query")}},this.device=S(),this.snapshot=new D({device:0,created:""}),this.query(),this.read(),this.snapshot.created||(this.snapshot=this.newSnapshot())};T.decoder=Object(N.c)({v:Object(N.b)(),device:Object(N.b)(),snapshot:D.decoder});var x,P=n(14),R=n(27),A=n(28),M=function(e){function t(e){var n;Object(i.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).isPositiveInteger=!1,n.originalValue=function(){return y(n.props.value)},n.defaultValue=function(){return y(n.props.defaultValue)},n.handleChange=function(){return function(e){if(g("change",e.currentTarget.value),n.isPositiveInteger){var t=Number(e.currentTarget.value);t<0&&(t=0),n.setState({value:String(t)})}else n.setState({value:e.currentTarget.value})}},n.handleKey=function(){return function(e){"Enter"===e.key&&n.props.onSave&&n.props.onSave(n.state.value.trim())}},n.focusOnWholeText=function(){return function(e){var t=e.currentTarget;setTimeout(function(){return t.setSelectionRange(0,9999)},0)}},n.isEmpty=function(e){var t=""===e||void 0===e;return n.isPositiveInteger&&(t=t||"0"===e),t},n.save=function(e){return function(t){n.props.onSave&&(void 0===e?n.props.onSave():n.isEmpty(e)&&!n.props.allowEmpty?n.isEmpty(n.props.defaultValue)||n.props.onSave(n.props.defaultValue):n.props.onSave(e.trim()))}},n.idPlus=function(e){return n.props.id?"".concat(n.props.id,"-").concat(e):void 0},n.isPositiveInteger="positive integer"===n.props.type;var a=y(n.props.value);return!n.props.allowEmpty&&n.isEmpty(a)&&(a=y(n.props.defaultValue)),n.state={value:a},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state.value,t=this.isPositiveInteger,n=s.createElement(s.Fragment,null);if(void 0==this.props.footer){var a=this.isEmpty(e)&&this.isEmpty(this.defaultValue())&&!1===this.props.allowEmpty,o=this.isEmpty(this.originalValue())&&!1===this.props.allowEmpty,r=this.props.onSave?void 0!=this.props.value?s.createElement(h.Button,{id:this.idPlus("save-button"),label:"Save",icon:"pi pi-check",disabled:a,onClick:this.save(y(e,this.defaultValue()))}):s.createElement(h.Button,{id:this.idPlus("close-button"),label:"Close",icon:"pi pi-times",onClick:this.save()}):s.createElement(s.Fragment,null),i=o||void 0===this.props.value?"":s.createElement(h.Button,{id:this.idPlus("cancel-button"),label:"Cancel",icon:"pi pi-times",className:"p-button-secondary",onClick:this.save()});n=s.createElement(s.Fragment,null,r,this.props.extraButtons,i)}else n=this.props.footer;return s.createElement("div",{className:"valuecard-wrapper"},s.createElement("div",{className:"background-blocker",onClick:this.save()}),s.createElement(A.Card,{id:this.idPlus("valuecard"),className:"valuecard ".concat(this.idPlus("valuecard")),title:this.props.title,header:this.props.image?s.createElement("div",{id:this.idPlus("picture-container"),className:"picture-container"},s.createElement("img",{alt:"".concat(this.props.alt),src:"".concat(this.props.image)}),this.props.onSave&&void 0==this.props.value?s.createElement(h.Button,{id:this.idPlus("picture-close-button"),icon:"pi pi-times",onClick:this.save()}):s.createElement(s.Fragment,null)):void 0,footer:n},this.props.children?s.createElement("div",{id:this.idPlus("valuecard-children"),className:"valuecard-children"},this.props.children):"",this.props.description?s.createElement("div",{id:this.idPlus("valuecard-description"),className:"valuecard-description"},s.createElement("p",null,this.props.description)):"",void 0!=this.props.value?s.createElement(P.InputText,{id:this.idPlus("card-field"),className:t?"number":"text",autoComplete:"off",keyfilter:t?"pint":"",type:"text",pattern:t?"\\d*":void 0,value:t&&"0"===e?"":e,placeholder:this.props.defaultValue,onChange:this.handleChange(),onKeyUp:this.handleKey(),autoFocus:!0}):""))}}]),t}(s.Component),F=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){g("render info card",this.props.subcaucus.id);var e=this.props,t=e.subcaucus,n=e.dismiss;return s.createElement(M,{title:t.displayName(),footer:s.createElement(h.Button,{label:"OK",onClick:n})},t.delegates?s.createElement("p",null,"The ",s.createElement("strong",null,t.count.singularPlural("member","members"))," of this subcaucus may elect ",s.createElement("strong",null,t.delegates.singularPlural("delegate","delegates")),"."):s.createElement("p",null,"This subcaucus did not attract enough members to be viable. It may not elect any delegates. Members of this subcaucus should consider joining other subcaucuses in order to have some say in the delegates elected."),s.createElement("p",null,0===t.remainder?"":s.createElement("span",null,"This subcaucus had a remainder of ",s.createElement("strong",null,t.remainder.decimalPlaces(3)),". "),t.delegates>t.baseDelegates?s.createElement("span",null,"It was awarded a ",s.createElement("strong",null,"remainder delegate")," because it had one of the higher remainders. "):"",t.tosses().map(function(e){return s.createElement("span",null,"It ",e.won?"won":"lost"," a coin toss against ",e.against.displayName(),". ")})))}}]),t}(s.Component),U=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).handleName=function(){return function(e){var t=e.currentTarget.tabIndex,a=e.currentTarget.value;g("handle name index",t,"is",a),n.setState({name:a})}},n.handleCount=function(){return function(e){var t=e.currentTarget.tabIndex,a=Number(e.currentTarget.value);g("handle count index",t,"is",a),a<0&&(a=0),n.setState({count:a})}},n.handleBlur=function(){return function(e){var t=n.props.subcaucus;g("handle blur index",e.currentTarget.tabIndex),t.name===n.state.name&&t.count===n.state.count||(t.name=n.state.name,t.count=n.state.count,n.props.exchange(t,"recalc"))}},n.handleKey=function(){return function(e){var t=n.props,a=t.rows,s=t.subcaucus,o=e.currentTarget.tabIndex;g("handle key index",o,"got",e.key,"for",s.id,s.debug()),"Enter"!==e.key&&"Tab"!==e.key||(e.preventDefault(),s.name=n.state.name,s.count=n.state.count,n.props.exchange(s,"enter",o,function(){var e=o==2*a?2:1;document.querySelectorAll(".subcaucus-field").forEach(function(t){var n=t;n.tabIndex===o+e&&n.focus()})}))}},n.focusOnWholeText=function(){return function(e){var t=e.currentTarget;setTimeout(function(){return t.setSelectionRange(0,9999)},0)}},n.idPlus=function(e){return"subcaucus-".concat(n.props.subcaucus.id,"-").concat(e)},n.state={name:n.props.subcaucus.name,count:n.props.subcaucus.count,delegates:n.props.subcaucus.delegates,showInfo:!1},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.subcaucus;g("render row",t.id,this.state);var n=this.state,a=n.name,o=n.count,r=n.showInfo?s.createElement(F,{subcaucus:t,dismiss:function(){return e.setState({showInfo:!1})}}):"";return s.createElement(s.Fragment,null,s.createElement("div",{id:this.idPlus("row"),className:"subcaucus-row ".concat(t.delegates>0?"has-delegates":o>0?"no-delegates":"")},v()?s.createElement("div",{className:"subcaucus-id"},t.id):"",s.createElement(R.InputTextarea,{id:this.idPlus("row-name"),className:"subcaucus-field subcaucus-name",autoComplete:"off",tabIndex:this.props.index,type:"text",value:a,rows:1,cols:1,placeholder:t.defaultName(),onChange:this.handleName(),onKeyDown:this.handleKey(),onBlur:this.handleBlur(),onFocus:this.focusOnWholeText()}),s.createElement(P.InputText,{id:this.idPlus("row-count"),className:"subcaucus-field subcaucus-count",autoComplete:"off",tabIndex:this.props.index+this.props.rows,keyfilter:"pint",type:"text",pattern:"\\d*",value:o||"",placeholder:"\u2014",onChange:this.handleCount(),onKeyDown:this.handleKey(),onBlur:this.handleBlur(),onFocus:this.focusOnWholeText()}),s.createElement(h.Button,{id:this.idPlus("row-delegates"),className:"subcaucus-delegates-button ".concat(t.delegates>0?"p-button-success":"p-button-secondary"),label:t.delegates?"".concat(t.delegates):void 0,icon:t.delegates?void 0:o?"pi pi-ban":"pi",onClick:function(){return e.setState({showInfo:!0})},disabled:0===o},s.createElement("div",{className:t.reportTosses?t.delegates>t.baseDelegates?"coin won":"coin lost":"coin"}))),r)}}]),t}(s.Component),L=n(17);!function(e){e[e.Descending=-1]="Descending",e[e.None=0]="None",e[e.Ascending=1]="Ascending"}(x||(x={}));var _,V,J,K=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).renderMenu=function(){var e=[];return e.push({label:"Back to the calculator",icon:"pi pi-fw pi-caret-left",command:function(){return n.props.onLoad()}}),s.createElement(m.Menubar,{key:"loader-menu",model:e,id:"app-main-menu"})},n.sortOrderIcon=function(e){return"name"===e?"name"===n.state.sortBy?"pi pi-chevron-circle-up":"pi pi-chevron-circle-off":"date"===n.state.sortBy?"pi pi-chevron-circle-down":"pi pi-chevron-circle-off"},n.toggleSortOrder=function(){n.setState({sortBy:"name"===n.state.sortBy?"date":"name"})},n.deleteSnapshot=function(e){n.props.subcalc.trashSnapshot(e),n.forceUpdate()},n.renderSnapshot=function(e){var t=new Date(Date.parse(e.created)).toLocaleString(void 0,{year:"numeric",month:"numeric",day:"numeric"}),a=new Date(Date.parse(e.revised)),o=t===a.toLocaleString(void 0,{year:"numeric",month:"numeric",day:"numeric"})?a.toLocaleString(void 0,{hour:"numeric",minute:"2-digit",second:void 0}):a.toLocaleString(void 0,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit",second:void 0});return s.createElement("div",{key:"loader-snapshot-".concat(e.revised,"-").concat(e.device),className:"loader-snapshot"},s.createElement("div",{className:"loader-snapshot-button button",onClick:function(){return n.props.onLoad(e)}},s.createElement("div",{className:"loader-snapshot-revised"},o),s.createElement("div",{className:"loader-snapshot-name"},s.createElement("span",{className:"pi pi-clock"},"\xa0"),e.revision)),"saved"===n.state.showing?s.createElement("div",{className:"loader-snapshot-actions"},s.createElement(h.Button,{icon:"pi pi-trash",className:"p-button-danger",onClick:function(){return n.deleteSnapshot(e)}})):"")},n.renderSnapshots=function(e){return s.createElement(s.Fragment,null,e.map(function(e){return n.renderSnapshot(e)}))},n.sortBySnapshotRevision=function(e,t){var n=0,a="".concat(e.created," ").concat(e.device," ").concat(e.revised),s="".concat(t.created," ").concat(t.device," ").concat(t.revised);return a<s&&(n=1),a>s&&(n=-1),n},n.sortBySnapshotName=function(e,t){var n=0,a="".concat(e.name," ").concat(e.created," ").concat(e.device," ").concat(e.revision).toUpperCase(),s="".concat(t.name," ").concat(t.created," ").concat(t.device," ").concat(t.revision).toUpperCase();return a<s&&(n=-1),a>s&&(n=1),n},n.renderMeeting=function(e){var t=e[0],a=e.map(function(e){return n.renderSnapshot(e)}),o=new Date(Date.parse(t.created)).toLocaleString(void 0,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit",second:void 0});return s.createElement(L.AccordionTab,{key:"loader-meeting-".concat(t.meetingKey()," ").concat(n.state.sortBy," ").concat(n.state.showing),headerClassName:"loader-meeting-accordion-header ".concat(n.state.showing),contentClassName:"loader-meeting-accordion-content",header:s.createElement("div",{className:"loader-meeting-header"},s.createElement("div",{className:"loader-meeting-name"},t.name),s.createElement("div",{className:"loader-meeting-timestamp"},o))},a)},n.renderMeetings=function(){var e=n.props.subcalc.snapshots(n.state.showing);if(0===e.length)return"saved"===n.state.showing?s.createElement(M,{key:"nothing-to-load",title:"No snapshots yet",description:"You will have to save a snapshot before you can open one!",footer:s.createElement(h.Button,{key:"nothing-to-load-button",label:"OK",icon:"pi pi-check",onClick:function(){return n.props.onLoad()}})}):s.createElement(M,{key:"nothing-to-load",title:"Nothing in the trash",description:"The trash is empty.",footer:s.createElement(h.Button,{key:"nothing-to-load-button",label:"OK",icon:"pi pi-check",onClick:function(){return n.setState({showing:"saved"})}})});var t=n.props.subcalc.snapshot.meetingKey(),a=[],o="",r=0,i=0,c=[],u="name"===n.state.sortBy?n.sortBySnapshotName:n.sortBySnapshotRevision;return e.sort(u).forEach(function(e){o!==e.meetingKey()&&((o=e.meetingKey())===t&&(i=r),r++,c.length>0&&a.push(n.renderMeeting(c)),c=[]),c.push(e)}),a.push(n.renderMeeting(c)),s.createElement("div",{key:"loader-meetings",className:"loader-meetings"},s.createElement(L.Accordion,{key:"".concat(n.state.sortBy),activeIndex:i},a))},n.state={sortBy:"date",showing:"saved"},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return s.createElement("div",{className:"loader"},this.renderMenu(),s.createElement("div",{id:"meeting-info"},s.createElement("div",{id:"meeting-name",className:"not-button"},"Pick a snapshot below to open it...")),s.createElement("div",{id:"loader-container"},s.createElement("div",{id:"loader-header"},s.createElement(h.Button,{id:"loader-name-head",label:"Name",icon:this.sortOrderIcon("name"),onClick:function(){return e.toggleSortOrder()}}),s.createElement(h.Button,{id:"loader-timestamp-head",label:"Last Revised",iconPos:"right",icon:this.sortOrderIcon("date"),onClick:function(){return e.toggleSortOrder()}})),this.renderMeetings(),s.createElement("div",{id:"subcaucus-footer"},"saved"===this.state.showing?s.createElement(h.Button,{id:"add-meeting-button",label:"Add new meeting",icon:"pi pi-calendar-plus",onClick:function(){return e.props.onNew()}}):s.createElement(h.Button,{id:"empty-trash-button",label:"Empty trash",icon:"pi pi-trash",onClick:function(){e.props.subcalc.emptyTrash(),e.setState({showing:"saved"})}}),"saved"===this.state.showing?s.createElement(h.Button,{id:"show-trashed-button",label:"Show trash",icon:"pi pi-trash",className:"p-button-secondary",onClick:function(){return e.setState({showing:"trashed"})}}):s.createElement(h.Button,{id:"show-saved-button",label:"Show saved",icon:"pi pi-calendar",className:"p-button-secondary",onClick:function(){return e.setState({showing:"saved"})}}),s.createElement(h.Button,{id:"cancel-loader-button",label:"Cancel",icon:"pi pi-times",className:"p-button-secondary",onClick:function(){return e.props.onLoad()}}))))}}]),t}(s.Component),W=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=JSON.stringify(this.props.data,null,2);return s.createElement("div",{className:"show-json"},s.createElement("pre",null,this.props.name?"".concat(this.props.name," = "):"",e))}}]),t}(s.Component),q=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return s.createElement(M,{key:"remove-empties-card",id:"remove-empties-card",title:"Remove empty subcaucuses",footer:s.createElement(s.Fragment,null,s.createElement(h.Button,{id:"remove-all-empties-button",label:"Remove All Empties",icon:"pi pi-trash",onClick:function(){return e.props.removeEmpties()}}),s.createElement(h.Button,{id:"remove-some-empties-button",label:"Remove Only Unnamed",icon:"pi pi-trash",className:"p-button-warning",onClick:function(){return e.props.removeEmpties("unnamed")}}),s.createElement(h.Button,{id:"cancel-remove-button",label:"Cancel",icon:"pi pi-times",className:"p-button-secondary",onClick:function(){return e.props.cancel()}}))},s.createElement("p",null,'An "empty" subcaucus is one with no participants \u2014 a zero count.'),s.createElement("p",null,"You can choose to remove all empty subcaucuses, or only those which also have no names."))}}]),t}(s.Component),Y=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.createElement(M,{key:"coin-value",id:"coin-value",title:"Change the coin",type:"positive integer",value:this.props.value,allowEmpty:!1,extraButtons:this.props.allowed?s.createElement(h.Button,{id:"random-coin-button",label:"Generate random coin",icon:"pi pi-refresh",className:"p-button-success",onClick:this.props.generate}):s.createElement(s.Fragment,null),onSave:this.props.save},s.createElement("p",null,'Traditionally, when there are delegates remaining to be assigned and two subcaucuses are "tied" with the same size delegations, the chair of the caucus will use some method of assigning those remaining delegates at random. These methods include coin-flips or drawing lots.'),s.createElement("p",null,'In this calculator we accomplish the same randomness, but we do so by in essence, flipping a coin in secret ahead of time. The "coin" is really a "random seed" that ensures fair but unpredictable results.'),s.createElement("p",null,"If you change the coin, this pattern of random flips will also change. If want the same results as someone else is getting in their copy of the calculator, then you must share the same coin value."))}}]),t}(s.Component),Q=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.createElement(M,{key:"delegate-value",id:"delegate-value",title:"Number of delegates allowed?",type:"positive integer",value:this.props.allowed.toString(),allowEmpty:!1,extraButtons:this.props.allowed?s.createElement(h.Button,{id:"new-meeting-button",label:"New meeting",icon:"pi pi-calendar-plus",className:"p-button-secondary",onClick:this.props.newMeeting}):s.createElement(s.Fragment,null),onSave:this.props.save},s.createElement("p",null,"Specify the number of delegates that your meeting or caucus is allowed to send on to the next level. This is the number of delegates to be elected by your meeting.",this.props.allowed?s.createElement("span",null," If this is actually a new event, you may want to start a new meeting instead"):s.createElement(s.Fragment,null)))}}]),t}(s.Component),z=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.createElement(M,{key:"name-value",id:"name-value",title:"Meeting name?",value:this.props.name,defaultValue:this.props.defaultName,allowEmpty:!1,extraButtons:this.props.name?s.createElement(h.Button,{id:"new-meeting-button",label:"New meeting",icon:"pi pi-calendar-plus",className:"p-button-secondary",onClick:this.props.newMeeting}):s.createElement(s.Fragment,null),onSave:this.props.save},s.createElement("p",null,"You can save a new name for this meeting or, if this is really a new event, you may want to start a new meeting altogether."))}}]),t}(s.Component),G=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return s.createElement(M,{key:"snapshot-value",id:"snapshot-value",title:"Name for the snapshot?",value:"",defaultValue:"Revision of ".concat(this.props.name),allowEmpty:!1,extraButtons:s.createElement(h.Button,{id:"cancel-save-snapshot-button",label:"Cancel",icon:"pi pi-times",className:"p-button-secondary",onClick:function(){return e.props.save()}}),onSave:this.props.save},s.createElement("p",null,'Consider names like "First walk" or "Final result".'))}}]),t}(s.Component),Z=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(s)))).save=function(e){return function(t){n.props.save(e)}},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.createElement(M,{key:"snapshot-value",id:"snapshot-value",title:this.props.title||"Save changes?",value:"",defaultValue:"Revision of ".concat(this.props.name),allowEmpty:!1,extraButtons:s.createElement(s.Fragment,null,s.createElement(h.Button,{id:"just-load-snapshot-button",label:"Don't save",icon:"pi pi-folder-open",className:"p-button-warning",onClick:this.save("")}),s.createElement(h.Button,{id:"cancel-save-and-load-snapshot-button",label:"Cancel",icon:"pi pi-times",className:"p-button-secondary",onClick:this.save()})),onSave:this.props.save},s.createElement("p",null,'It looks like you have unsaved changes in the calculator. Do you want to save a snapshot? If so, provide a name like "First walk" or "Final result". If you don\'t save a snapshot, your changes may be lost when you continue.'))}}]),t}(s.Component),H=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.createElement(M,{key:"welcome-card",id:"welcome-card",title:"Welcome to the Minnesota DFL Subcacus Calculator",image:"dfl.jpg",description:'Please start by specifying the name of your meeting here. Most meetings have a name, like the "Ward 4 Precinct 7 Caucus" or the "Saint Paul City Convention".',value:this.props.name,defaultValue:this.props.defaultName,allowEmpty:!1,onSave:this.props.save})}}]),t}(s.Component),$=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.createElement(M,{key:"instructions-card",id:"instructions-card",title:"Fill in the subcaucuses",image:"walking.jpg",onSave:this.props.save},s.createElement("p",null,"Now it is time to fill in the subcaucus information. Just add each subcaucus name and the count of participants. Usually a convention or cacucus will solicit the names of subcaucuses first, feel free to enter them right away without a count. Then people will be encouraged to walk around the room and congregate with the subcaucus that most closely represents their views. When each subcacus reports how many members they attracted, you can enter that as the count for that subcaucus."),s.createElement("p",null,"As soon as you start entering subcaucus counts, the calculator will go to work determining how many delegates each subcaucus will be assigned. You can ignore those numbers until you have finished entering and confirming all the subcaucus counts. When you are done, the delegate numbers can be reported to the chair of your convention or caucus."),s.createElement("p",null,'Since most conventions or caucuses will go through more than one round of "walking", you can just keep reusing your subcaucus list for each round. However, you might want to consider these steps at the end of each round:'),s.createElement("ul",null,s.createElement("li",null,'Use the "Meetings" menu at the top to save a snapshot after each round of caucusing. This will give you a good record of the whole process.'),s.createElement("li",null,'Use the "Share" menu to email a report about each round to the chair of the meeting just so they also have a clear record of the process.')),s.createElement("p",null,'You can always get these instructions back under the "About" menu at the top. Have fun!'))}}]),t}(s.Component),X=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.createElement(M,{key:"about-card",id:"about-card",title:"Minnesota DFL Subcaucus Calculator",image:"dfl.jpg",onSave:this.props.save,extraButtons:s.createElement(h.Button,{id:"show-credits-button",label:"Credits",icon:"pi pi-user",className:"p-button-secondary",onClick:this.props.showCredits})},s.createElement("p",null,"Originally written for ",s.createElement("a",{href:"http://sd64dfl.org"},"SD64 DFL"),", this app assists convenors of precinct caucuses and conventions in Minnesota. The Minnesota Democratic Farmer Labor (DFL) party uses a wonderful, but bit arcane, \u201cwalking subcaucus\u201d process that is simple enough to do, but rather difficult to tabulate."),s.createElement("p",null,"Given the number of delegates your meeting or caucus is allowed to send forward and the count of members of each subcaucus, this calculator determines how many of those delegates each subcaucus will elect. The rules it follows appeared on page 4 of the ",s.createElement("a",{href:"http://www.sd64dfl.org/more/caucus2014printing/2014-Official-Call.pdf"},"DFL 2014 Official Call"),", including the proper treatment of remainders. It makes the math involved in a walking subcaucus disappear."),s.createElement("p",null,"The app could be used to facilitate a \u201cwalking subcaucus\u201d or \u201c",s.createElement("a",{href:"https://en.wikipedia.org/wiki/Proportional_representation"},"proportional representation"),"\u201d system for any group."))}}]),t}(s.Component),ee=n(29),te=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=f();return s.createElement(M,{key:"by-card",id:"by-card",title:"Brought to you by Tenseg LLC",image:"tenseg.jpg",onSave:this.props.save},s.createElement("p",null,"We love the walking subcaucus process and it makes us a bit sad that the squirrelly math required to calculate who gets how many delegate discourages meetings and caucuses from using the process. We hope this calculator makes it easier for you to get to know your neighbors as you work together to change the world!"),s.createElement("p",null,"Please check us out at ",s.createElement("a",{href:"https://tenseg.net"},"tenseg.net")," if you need help building a website or making appropriate use of technology."),s.createElement("h3",null,"Licenses"),s.createElement("p",null,"This calculator's code is available under the MIT License at Bitbucket."),s.createElement("p",null,"It makes use of ",s.createElement("a",{href:"https://reactjs.org/"},"ReactJS"),", ",s.createElement("a",{href:"https://www.typescriptlang.org/"},"TypeScript"),", ",s.createElement("a",{href:"https://www.primefaces.org/primereact"},"PrimeReact"),", ",s.createElement("a",{href:"https://www.primefaces.org/primeng/#/icons"},"PrimeIcons"),", ",s.createElement("a",{href:"https://github.com/mojotech/json-type-validation"},"JSON Type Validation"),", ",s.createElement("a",{href:"https://github.com/ClickSimply/typescript-map"},"typescript-map"),", and many other open source projects."),s.createElement("div",{className:"fineprint"},s.createElement(s.Fragment,null,"v ",ee.version),w()?s.createElement(s.Fragment,null," a ",e.version):"",v()?s.createElement(s.Fragment,null," d ",e.build):""))}}]),t}(s.Component),ne=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.createElement(M,{key:"security-card",id:"security-card",title:"Data security",image:"security.jpg",extraButtons:s.createElement(h.Button,{id:"clear-data -button",label:"Clear All Data",icon:"pi pi-exclamation-triangle",className:"p-button-danger",onClick:this.props.clearData}),onSave:this.props.save},w()?s.createElement(s.Fragment,null,s.createElement("p",null,"SubCalc stores all of the data you enter on your device. None of your data is shared with other apps or sent off your device unless you choose to share it."),s.createElement("p",null,"One thing to be aware of is that anyone who can unlock this device will be able to use this app to see your meeting information, including saved snapshots and past meetings. While your device is locked the data is protected with your passcode."),s.createElement("p",null,"Since the data is stored on your device, also be aware that you will not be able to see your meeting information from any other device or on the web version of this calculator. This means that you won't be able to get at this data from other devices or browsers unless you use the sharing features.")):s.createElement(s.Fragment,null,s.createElement("p",null,'The subcaucus calculator stores all of the data you enter on your own device. It uses a feature of web browsers called "local storage" to save all your meeting information within your web browser. None of your data gets off your device unless you choose to share it.'),s.createElement("p",null,"Do note that this app is running on a web server, though, and that server will keep all the logs typical of web servers. This includes logs of your IP address and the documents you retrieve from the server. None of these logs will include your specific meeting information."),s.createElement("p",null,"One thing to be aware of is that anyone using this same browser on this same device will be able to see your meeting information, including saved snapshots and past meetings, when they come to this web site."),s.createElement("p",null,"Since the data is stored with your browser on this device, also be aware that you will not be able to see your meeting information from any other browser. This means that you won't be able to get at this data from other devices or browsers unless you use the sharing features.")),s.createElement("p",null,'You can use the "Share" menu to get data off your device when you need to do so. Once you share your meeting information this calculator is no longer in control of that data. Make good choices about sharing.'),s.createElement("p",null,"The good news is that there really isn't any private information in the calculator in the first place. Most meetings that use the walking subcacus process are public meetings and the data you store in this calculator is not sensitive. Still, we thought you'd like to know we treat it as ",s.createElement("em",null,"your")," data and do not share it unless you ask us to."),s.createElement("p",null,"If you want to erase all data the calculator has stored tap the \u201cClear All Data\u201d button. ",s.createElement("em",null,"This action is irreversable.")))}}]),t}(s.Component),ae=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.snapshot;return s.createElement(M,{key:"about-card",id:"about-card",title:"Explaining the numbers",onSave:this.props.save},s.createElement("p",null,s.createElement("em",null,"The text below comes from page 4 of the ",s.createElement("a",{href:"https://www.dfl.org/wp-content/uploads/2018/04/2017-12-14-Call-Amended-2-December-2017-Final2c-Rev-B.pdf"},"2018-2019 Official Call of the DFL"),". The numbers are from the current calculator values.")),s.createElement("p",null,"The threshold for subcaucus viability is the number of persons needed to elect one delegate. Viability is determined in the following manner:"),s.createElement("p",null,s.createElement("strong",null,"Step No. 1:")," Add up the total number of members of all the subcaucuses. [",e.participants,"]"),s.createElement("p",null,s.createElement("strong",null,"Step No. 2:")," Divide the result of Step No. 1 by the total number of delegates to be elected [",s.createElement("strong",null,e.participantsPerDelegate.decimalPlaces(3)),"]. If there is a remainder, round the result up to the next whole number. This is the viability number [",s.createElement("strong",null,e.viabilityNumber),"]."),s.createElement("p",null,"If all remaining subcaucuses are viable on the first count, then there shall be no second count. Any subcaucus which has fewer delegates than the initial viability number is informed that it is not viable and members must join a viable subcaucus to continue participating in subcaucusing. [",s.createElement("strong",null,e.participants===e.viableParticipants?"Subcaucuses are all viable.":"Some subcaucuses are not viable."),"]"),s.createElement("p",null,"A time is specified (by majority vote of the precinct caucus or in the convention rules) for the second and final count. Prior to this time, individuals may move among the subcaucuses. At the specified time all movement ceases and the members of each subcaucus are counted by the convention tellers. Results of that count are reported to the chair. Delegate allocation is then determined by the chair as follows:"),s.createElement("p",null,s.createElement("strong",null,"First:")," Add up the total number of members of all the viable subcaucuses [",s.createElement("strong",null,e.viableParticipants),"]."),s.createElement("p",null,s.createElement("strong",null,"Second:")," Divide the result of the first step by the total number of delegates to be elected. Carry this division out to at least three decimal places [",s.createElement("strong",null,e.delegateDivisor.decimalPlaces(3)),"]."),s.createElement("p",null,s.createElement("strong",null,"Finally:")," Divide the number of members of each subcaucus by the result of the second step. The whole number result is the minimum number of delegates allotted to that subcaucus."),s.createElement("p",null,'After allotting delegates in this manner, allot any remaining delegates to subcaucuses in the order of the largest remainder to the smallest remainder. (A subcaucus whose number is less than "1" on the final count will not be allotted any delegates or alternates.)'),s.createElement("p",null,s.createElement("em",null,'You can click on the number of delegates for any subcaucus to see this breakdown of "minimal number of delegates" and "remaining delegates".')))}}]),t}(s.Component);!function(e){e[e.Descending=-1]="Descending",e[e.None=0]="None",e[e.Ascending=1]="Ascending"}(_||(_={})),function(e){e[e.Nothing=0]="Nothing",e[e.WelcomeAndSetName=1]="WelcomeAndSetName",e[e.ChangingName=2]="ChangingName",e[e.ChangingDelegates=3]="ChangingDelegates",e[e.ChangingCoin=4]="ChangingCoin",e[e.SavingSnapshot=5]="SavingSnapshot",e[e.SavingSnapshotBefore=6]="SavingSnapshotBefore",e[e.RemovingEmpties=7]="RemovingEmpties",e[e.ShowingAbout=8]="ShowingAbout",e[e.ShowingBy=9]="ShowingBy",e[e.ShowingInstructions=10]="ShowingInstructions",e[e.ShowingSecurity=11]="ShowingSecurity",e[e.Viability=12]="Viability"}(V||(V={})),function(e){e[e.Calculator=0]="Calculator",e[e.Loading=1]="Loading"}(J||(J={}));var se=function(e){function t(e){var n,o;Object(i.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).subcalc=new T,n.keySuffix=String(S()),n.initialCardState=[V.WelcomeAndSetName,V.ChangingDelegates],n.growl=null,n.tooltipOptions={showDelay:1500,hideDelay:333,position:"top"},n.loadSnapshot=function(e){e&&(n.subcalc.setSnapshot(e),n.subcalc.snapshot.redistributeDelegates()),n.setState({present:J.Calculator})},n.setStateName=function(e){n.subcalc.renameMeeting(e),n.forceUpdate()},n.setStateAllowed=function(e){n.subcalc.reviseSnapshot({allowed:e}),n.forceUpdate()},n.setStateSeed=function(e){n.subcalc.reviseSnapshot({seed:e}),n.forceUpdate()},n.setStateSubcaucuses=function(){n.subcalc.reviseSnapshot(),n.forceUpdate()},n.completeIncoming=function(){n.subcalc.completeIncoming(),n.state&&n.forceUpdate()},n.newMeeting=function(){n.subcalc.newSnapshot(),n.keySuffix=String(S()),n.setState({present:J.Calculator,cards:n.initialCardState})},n.duplicateMeeting=function(){n.subcalc.duplicateSnapshot(),n.growlAlert(n.subcalc.snapshot.name,"success","Snapshot Duplicated"),n.keySuffix=String(S()),n.forceUpdate()},n.saveSnapshot=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:V.SavingSnapshot;e&&(n.subcalc.saveSnapshot(e),n.growlAlert(e,"success","Snapshot Saved")),n.removeCardState(t)},n.emailSnapshot=function(){var e=n.subcalc.snapshot,t="".concat(location.protocol,"//").concat(location.host).concat(location.pathname)+"?caucus="+encodeURIComponent(JSON.stringify(e.toJSON())),a=e.asText();a+="\nOpen this snapshot yourself by clicking on this very long and ugly link:\n\n"+t+"\n";var s="Subcaucus Report for ";s+=e.name,s+=e.revision?" (".concat(e.revision,")"):"";var o="mailto:?subject="+encodeURIComponent(s)+"&body="+encodeURIComponent(a);location.href=o},n.defaultName=function(){return"Meeting on "+n.subcalc.snapshot.created.toDate().toLocaleDateString("en-US")},n.allowedString=function(){return"".concat(n.subcalc.snapshot.allowed," delegates to be elected")},n.addCard=function(e,t){return void 0===t&&(t=n.state.cards),[].concat(Object(r.a)(t),[e])},n.addCardState=function(e){n.setState({cards:n.addCard(e)})},n.removeCard=function(e,t){return void 0===t&&(t=n.state.cards),t.filter(function(t){return t!=e})},n.removeCardState=function(e){e!==V.Nothing&&n.setState({cards:n.removeCard(e)})},n.switchCardState=function(e,t){var a=n.removeCard(e);a=n.addCard(t,a),n.setState({cards:a})},n.showingCard=function(e){return n.state.cards.indexOf(e)>-1},n.handleChange=function(e){return function(t){switch(e){case"allowed":var a=Number(t.currentTarget.value);a<0&&(a=0),n.setStateAllowed(a);break;case"name":n.setStateName(t.currentTarget.value)}}},n.focusOnWholeText=function(){return function(e){var t=e.currentTarget;setTimeout(function(){return t.setSelectionRange(0,9999)},0)}},n.handleSubcaucusChange=function(e,t,a,s){switch(g("subcaucus changed",e.id,e.debug(),t),t){case"enter":return void(a&&(g("enter index",a,"length",n.subcalc.snapshot.subcaucuses.length),a!==n.subcalc.snapshot.subcaucuses.length&&a!==2*n.subcalc.snapshot.subcaucuses.length||n.subcalc.snapshot.addSubcaucus(),n.setStateSubcaucuses(),s&&s()));case"recalc":return void n.setStateSubcaucuses()}},n.removeEmpties=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";"all"==e&&(n.subcalc.snapshot.subcaucuses.filter(function(e,t){return e.count>0}),n.subcalc.reviseSnapshot()),"unnamed"==e&&n.subcalc.snapshot.subcaucuses.filter(function(e,t,n){return g("remove?",e.id,e.count,e.name,e.count>0||""!=e.name,"key",t,"index",n),e.count>0||""!=e.name}),n.removeCardState(V.RemovingEmpties),n.subcalc.reviseSnapshot()},n.sortOrderIcon=function(e){return["pi pi-chevron-circle-down","pi pi-circle-off","pi pi-chevron-circle-up"][e+1]},n.nextSortOrder=function(e){var t=(e+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)+1)%3;return t<0&&(t+=3),t-1},n.checkForRevisionBefore=function(e,t){""==n.subcalc.snapshot.revision?(n.setState({afterBefore:e,before:t}),n.addCardState(V.SavingSnapshotBefore)):e()},n.renderMenu=function(){var e=[{label:"About",icon:"pi pi-fw pi-info-circle",items:[{label:"Minnesota DFL Subcaucus Calculator",command:function(){return n.addCardState(V.ShowingAbout)}},{label:"Instructions",command:function(){return n.addCardState(V.ShowingInstructions)}},{label:"Data Security",command:function(){return n.addCardState(V.ShowingSecurity)}}]},{label:"Meetings",icon:"pi pi-fw pi-calendar",items:[{label:"New meeting",icon:"pi pi-fw pi-calendar-plus",command:function(){return n.checkForRevisionBefore(n.newMeeting,"Before creating a new meeting...")}},{label:"Open snapshot",icon:"pi pi-fw pi-folder-open",command:function(){return n.checkForRevisionBefore(function(){return n.setState({present:J.Loading})},"Before opening a snapshot...")}},{label:"Save snapshot",icon:"pi pi-fw pi-clock",command:function(){return n.addCardState(V.SavingSnapshot)}},{label:"Duplicate meeting",icon:"pi pi-fw pi-clone",command:function(){return n.checkForRevisionBefore(n.duplicateMeeting,"Before duplicating the meeting...")}},{label:"Change the coin",icon:"pi pi-fw pi-refresh",command:function(){return n.addCardState(V.ChangingCoin)}}]},{label:"Share",icon:"pi pi-fw pi-share-alt",items:[{label:"Email report",icon:"pi pi-fw pi-envelope",command:n.emailSnapshot},{label:"Download text",icon:"pi pi-fw pi-align-left",command:function(){w()?location.href="subcalc://share-text/"+encodeURIComponent(n.subcalc.snapshot.asText()):C(n.subcalc.snapshot.asText(),"subcalc.txt")}},{label:"Download CSV",icon:"pi pi-fw pi-table",command:function(){w()?location.href="subcalc://share-csv/"+encodeURIComponent(n.subcalc.snapshot.asCSV())+"?filename=subcalc":C(n.subcalc.snapshot.asCSV(),"subcalc.csv","text/csv")}},{label:"Download code",icon:"pi pi-fw pi-save",command:function(){var e=n.subcalc.snapshot.toJSON();w()?location.href="subcalc://share-text/"+encodeURIComponent(JSON.stringify(e,null,2)):C(JSON.stringify(e,null,2),"subcalc.json","application/json")}}]}];return s.createElement(m.Menubar,{key:"calculator-menu",model:e,id:"app-main-menu"})},n.renderNextCard=function(){return n.state.cards.sort(function(e,t){return t-e}).reduce(function(e,t){switch(g("filtering cards",e,t),t){case V.WelcomeAndSetName:return s.createElement(H,{name:n.subcalc.snapshot.name,defaultName:n.defaultName(),save:n.saveName});case V.ShowingInstructions:return s.createElement($,{save:function(){return n.removeCardState(V.ShowingInstructions)}});case V.ShowingAbout:return s.createElement(X,{save:function(){return n.removeCardState(V.ShowingAbout)},showCredits:function(){return n.switchCardState(V.ShowingAbout,V.ShowingBy)}});case V.ShowingBy:return s.createElement(te,{save:function(){return n.removeCardState(V.ShowingBy)}});case V.SavingSnapshotBefore:return s.createElement(Z,{name:n.subcalc.snapshot.name,save:n.saveSnapshotBefore,title:n.state.before});case V.SavingSnapshot:return s.createElement(G,{name:n.subcalc.snapshot.name,save:n.saveSnapshot});case V.ChangingName:return s.createElement(z,{name:n.subcalc.snapshot.name,defaultName:n.defaultName(),save:n.saveName,newMeeting:n.newMeeting});case V.ChangingDelegates:return s.createElement(Q,{allowed:n.subcalc.snapshot.allowed,save:n.saveDelegatesAllowed,newMeeting:n.newMeeting});case V.ChangingCoin:return s.createElement(Y,{value:n.subcalc.snapshot.seed.toString(),allowed:n.subcalc.snapshot.allowed,save:n.saveRandomSeed,generate:n.generateRandomSeed});case V.RemovingEmpties:return s.createElement(q,{removeEmpties:n.removeEmpties,cancel:function(){return n.removeCardState(V.RemovingEmpties)}});case V.ShowingSecurity:return s.createElement(ne,{save:function(){return n.removeCardState(V.ShowingSecurity)},clearData:function(){n.subcalc.clear(),n.keySuffix=String(S()),n.setState({cards:n.initialCardState}),n.growlAlert("Starting again from scratch!","warn","Storage Cleared")}});case V.Viability:return s.createElement(ae,{save:function(){return n.removeCardState(V.Viability)},snapshot:n.subcalc.snapshot})}return e},s.createElement(s.Fragment,null))},n.saveSnapshotBefore=function(e){g("sSnapBefore",n.state.cards),n.removeCardState(V.SavingSnapshotBefore),void 0!==e&&(n.saveSnapshot(e,V.Nothing),n.state.afterBefore&&n.state.afterBefore())},n.saveName=function(e){void 0==e?n.removeCardState(V.ChangingName):(n.setState({cards:n.removeCard(V.WelcomeAndSetName,n.removeCard(V.ChangingName))}),n.setStateName(e))},n.saveDelegatesAllowed=function(e){void 0==e?n.removeCardState(V.ChangingDelegates):(n.setState({cards:n.removeCard(V.ChangingDelegates)}),n.setStateAllowed(Number(e)))},n.generateRandomSeed=function(){n.subcalc.reviseSnapshot({seed:S()}),n.growlAlert("Random seed is now ".concat(n.subcalc.snapshot.seed,"."),"success","New Random Coin"),n.removeCardState(V.ChangingCoin)},n.saveRandomSeed=function(e){if(void 0==e)n.removeCardState(V.ChangingCoin);else{var t=Number(e);t===n.subcalc.snapshot.seed?n.growlAlert("Random seed is still ".concat(n.subcalc.snapshot.seed,"."),"info","Coin not changed"):(n.subcalc.reviseSnapshot({seed:t}),n.growlAlert("Random seed is now ".concat(n.subcalc.snapshot.seed,"."),"success","New Chosen Coin")),n.removeCardState(V.ChangingCoin)}},n.sortBySubcaucusName=function(e,t){var a=e.id-t.id,s=e.displayName().toUpperCase(),o=t.displayName().toUpperCase();return s<o&&(a=-1),s>o&&(a=1),a*n.state.sortName},n.sortBySubcaucusCounts=function(e,t){var a=.1*(e.delegates-t.delegates).comparisonValue()+((e.count?e.count:n.state.sortCount*(1/0))-(t.count?t.count:n.state.sortCount*(1/0))).comparisonValue();return 0==a&&(a=n.sortBySubcaucusName(e,t)*n.state.sortName*-1),a*n.state.sortCount},n.renderSubcaucusRows=function(){var e=function(e,t){return e.id-t.id};return n.state.sortName!=_.None&&(e=n.sortBySubcaucusName),n.state.sortCount!=_.None&&(e=n.sortBySubcaucusCounts),n.subcalc.snapshot.subcaucuses.values().sort(e).map(function(e,t,a){return s.createElement(U,{key:"".concat(e.id," ").concat(n.keySuffix),subcaucus:e,index:t+1,rows:a.length,exchange:n.handleSubcaucusChange})})},n.renderSummary=function(){return n.subcalc.snapshot.participants>0?s.createElement("div",{id:"summary-container",onClick:function(){return n.addCardState(V.Viability)}},s.createElement("div",{className:"summary-row"},s.createElement("div",{className:"summary-label"},"Total participants and delegates elected"),s.createElement("div",{className:"summary-count"},s.createElement("strong",null,n.subcalc.snapshot.participants.toCommaString())),s.createElement("div",{className:"summary-delegates"},n.subcalc.snapshot.totalDelegates.toCommaString())),s.createElement("div",{className:"summary-row"},s.createElement("div",{className:"summary-label"},s.createElement("strong",null,"Viability number"),s.createElement("br",null),"(members needed for viable subcaucus)"),s.createElement("div",{className:"summary-count"},s.createElement("strong",null,n.subcalc.snapshot.viabilityNumber))),s.createElement("div",{className:"summary-row"},s.createElement("div",{className:"summary-label"},"Delegate divisor",s.createElement("br",null),"(members needed for each delegate)"),s.createElement("div",{className:"summary-count"},n.subcalc.snapshot.delegateDivisor.decimalPlaces(3))),n.subcalc.snapshot.viableParticipants<n.subcalc.snapshot.participants?s.createElement("div",{className:"summary-row"},s.createElement("div",{className:"summary-label"},(n.subcalc.snapshot.participants-n.subcalc.snapshot.viableParticipants).singularPlural("person","people")," in a non-viable subcaucus, you may want to consider another round of walking")):""):s.createElement("div",{id:"summary-container"},s.createElement("div",{className:"summary-row"},s.createElement("div",{className:"summary-label"},'To get an initial "viability number" just make all the people in the room members of a single subcaucus.')))},n.renderCalculator=function(){var e=n.state,t=e.sortName,a=e.sortCount,o=n.subcalc.snapshot,r=o.name,i=o.revision;return s.createElement("div",{id:"calculator"},n.renderMenu(),s.createElement("div",{id:"meeting-info"},s.createElement("div",{id:"meeting-name",className:"button",onClick:function(){return n.addCardState(V.ChangingName)}},r||n.defaultName(),""!=i?s.createElement("span",{className:"snapshot"},i):""),s.createElement("div",{id:"delegates-allowed",className:"button",onClick:function(){return n.addCardState(V.ChangingDelegates)}},n.allowedString())),s.createElement("div",{id:"subcaucus-container"},s.createElement("div",{id:"subcaucus-header"},s.createElement(h.Button,{id:"subcaucus-name-head",label:"Subcaucuses",icon:n.sortOrderIcon(t),onClick:function(){return n.setState({sortName:n.state.sortName?_.None:_.Ascending,sortCount:_.None})}}),s.createElement(h.Button,{id:"subcaucus-count-head",label:"Members",iconPos:"right",icon:n.sortOrderIcon(a),onClick:function(){return n.setState({sortName:_.None,sortCount:n.nextSortOrder(a,-1)})}}),s.createElement(h.Button,{id:"subcaucus-delegate-head",label:"Dels"})),s.createElement("div",{id:"subcaucus-list"},n.renderSubcaucusRows()),s.createElement("div",{id:"subcaucus-footer"},s.createElement(h.Button,{id:"add-subcaucus-button",label:"Add Subcaucus",icon:"pi pi-plus",onClick:function(){o.addSubcaucus(),n.setStateSubcaucuses()}}),s.createElement(h.Button,{id:"remove-empty-subcaucuses-button",label:"Empties",icon:"pi pi-trash",tooltip:"Remove subcaucuses that have no members",tooltipOptions:n.tooltipOptions,onClick:function(){return n.addCardState(V.RemovingEmpties)}}),s.createElement(h.Button,{id:"clear-counts-button",icon:"pi pi-minus-circle",tooltip:"Zero out the members of each subcaucus",tooltipOptions:n.tooltipOptions,onClick:function(){return n.checkForRevisionBefore(function(){n.subcalc.zeroSubcaucuses(),n.keySuffix=String(S()),n.forceUpdate()},"Before zeroing out the subcaucuses...")}}),v()?s.createElement(h.Button,{id:"random-coin-button",icon:"pi pi-refresh",className:"p-button-success",tooltip:"Get new random seed for the coin",tooltipOptions:n.tooltipOptions,onClick:function(){n.subcalc.reviseSnapshot({seed:S()}),n.growlAlert("Random seed is now ".concat(n.subcalc.snapshot.seed,"."),"success","New Random Coin"),n.keySuffix=String(S()),n.forceUpdate()}}):"")),n.renderSummary())},n.renderByline=function(){return s.createElement(h.Button,{id:"app-byline",label:"Brought to you by Tenseg LLC",href:"https://tenseg.net",onClick:function(){return n.addCardState(V.ShowingBy)}})},n.renderDebuggingInfo=function(){return v()?s.createElement("div",{key:S(),className:"debugging"},s.createElement("p",null,"This is debugging info for ",s.createElement("a",{href:"https://grand.clst.org:3000/tenseg/subcalc-pr/issues",target:"_repository"},"subcalc-pr")," (with ",s.createElement("a",{href:"https://reactjs.org/docs/react-component.html",target:"_react"},"ReactJS"),", ",s.createElement("a",{href:"https://www.primefaces.org/primereact/",target:"_primereact"},"PrimeReact"),", ",s.createElement("a",{href:"https://www.primefaces.org/primeng/#/icons",target:"_primeicons"},"PrimeIcons"),") derrived from ",s.createElement("a",{href:"https://bitbucket.org/tenseg/subcalc-js/src",target:"_bitbucket"},"subcalc-js"),"."),s.createElement("pre",null,n.subcalc.snapshot.asText()),s.createElement("div",{className:"columns"},s.createElement("div",{className:"column"},s.createElement("pre",null,"rendered App "+(new Date).toLocaleTimeString()),s.createElement("pre",null,"app: "+JSON.stringify(f())),s.createElement("pre",null,"subcalc: "+n.subcalc.debug()),s.createElement(W,{name:"this.state",data:n.state}),s.createElement("br",null)),s.createElement("div",{className:"column"},s.createElement(W,{name:"this.subcalc",data:n.subcalc}))),s.createElement("p",{style:{clear:"both"}},"Done.")):s.createElement(s.Fragment,null)},n.growlAlert=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";!a&&e&&(a=e,e=""),n.growl?n.growl.show({severity:t,summary:a,closable:!1,detail:e}):alert(e)},o=n.growlAlert,a=o,n.subcalc.snapshot.redistributeDelegates();var c=n.subcalc.snapshot.allowed?[]:n.initialCardState,d=void 0;return n.subcalc.incoming.length>0&&(""===n.subcalc.snapshot.revision?(c=[V.SavingSnapshotBefore],d=n.completeIncoming):n.completeIncoming()),n.state={cards:c,present:J.Calculator,before:void 0,afterBefore:d,sortName:_.None,sortCount:_.None},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return g("rendering",this.subcalc.snapshot),s.createElement("div",{id:"app"},s.createElement("div",{id:"app-content"},this.state.present==J.Calculator?this.renderCalculator():"",this.state.present==J.Loading?s.createElement(K,{subcalc:this.subcalc,onLoad:this.loadSnapshot,onNew:this.newMeeting}):"",this.renderByline(),this.renderNextCard(),s.createElement(p.Growl,{ref:function(t){return e.growl=t}})),this.renderDebuggingInfo())}}]),t}(s.Component),oe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function re(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}n(68);window.location.search?(localStorage.setItem("query",window.location.search),window.location.search=""):(o.render(s.createElement(se,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL(".",window.location.toString()).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat(".","/service-worker.js");oe?function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):re(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e):re(e)})}}())}},[[30,2,1]]]);
//# sourceMappingURL=main.1e12459b.chunk.js.map