{"version":3,"sources":["Utilities.tsx","Subcaucus.tsx","App.tsx","SubcaucusRow.tsx","ValueCard.tsx","registerServiceWorker.ts","index.tsx"],"names":["isDebugging","process","unwrapString","optional","empty","arguments","length","undefined","String","prototype","trim","str","this","replace","i","test","charAt","substring","Number","toCommaString","toString","singularPlural","singular","plural","concat","SortOrder","CardFor","Subcaucus","withID","name","count","delegates","Object","classCallCheck","id","SubcaucusRow","_React$Component","props","_this","possibleConstructorReturn","getPrototypeOf","call","handleName","event","value","currentTarget","setState","exchange","objectSpread","state","handleCount","num","notify","handleKey","key","focusOnWholeText","target","setTimeout","setSelectionRange","idPlus","suffix","subcaucus","inherits","createClass","_this$state","react","className","_u","inputtextarea","type","rows","cols","placeholder","onChange","onKeyUp","inputtext","keyfilter","pattern","onBlur","primereact_button","label","React","ValueCard","isPositiveInteger","originalValue","defaultValue","handleChange","onSave","isEmpty","save","allowEmpty","initialValue","cardFooter","footer","illegallyEmpty","originalIllegallyEmpty","saveButton","icon","disabled","onClick","cancelButton","extraButtons","primereact_card","title","header","image","alt","src","children","description","autoFocus","App","subcaucuses","TSMap","initialCardState","WelcomeAndSetName","ChangingDelegates","ShowingInstructions","_currentSubcaucusID","nextSubcaucusID","addSubcaucus","forceUpdate","newSubcaucus","set","defaultName","dateCreated","toLocaleDateString","allowedString","allowed","addCard","cardFor","to","cards","toConsumableArray","addCardState","removeCard","seekingCardFor","from","filter","foundCardFor","removeCardState","switchCardState","fromCardFor","toCardFor","newCards","showingCard","indexOf","handleSubcaucusChange","subcaucusID","action","get","removeEmpties","subset","k","RemovingEmpties","sortOrderIcon","order","nextSortOrder","currentOrder","nextOrder","renderMenu","items","command","ShowingAbout","alert","menubar","model","renderAbout","ValueCard_ValueCard","ShowingBy","href","renderInstructions","renderBy","renderWelcomeAndSetName","renderChangingName","ChangingName","renderChangingDelegates","renderRemovingEmpties","renderNextCard","sort","a","b","reduce","accumulator","renderSubcaucusRows","sortName","None","direction","Ascending","comparison","nameA","toUpperCase","nameB","sortCount","countComparison","values","map","SubcaucusRow_SubcaucusRow","renderSummary","summary","minimumCountForViability","Math","round","viability","nonViableCount","revisedViability","Date","_this2","menu","subcaucusRows","card","iconPos","isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","catch","error","ReactDOM","App_App","document","getElementById","URL","origin","addEventListener","fetch","response","status","headers","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.528d934f.chunk.js","sourcesContent":["// Utilities.tsx\n//\n// A number of helpful functions used throughout the app.\n//\n// Recommend this file be imported as:\n// import * as _u from './Utilities'\n//\n// We use the name \"_u\" so that tslint won't complain if we\n// do not actually use any _u functions in our file. This way\n// we still can import the prototype extensions.\n\n// Prototype extensions\n\ndeclare global {\n\n\tinterface String {\n\t\ttrim(): string\n\t}\n\n\tinterface Number {\n\t\ttoCommaString(): string\n\t\tsingularPlural(singular: string, plural: string): string\n\t}\n\n}\n// see http://blog.stevenlevithan.com/archives/faster-trim-javascript\nString.prototype.trim = function (): string {\n\tvar str = this.replace(/^\\s+/, '')\n\tfor (var i = str.length - 1; i >= 0; i--) {\n\t\tif (/\\S/.test(str.charAt(i))) {\n\t\t\tstr = str.substring(0, i + 1)\n\t\t\tbreak\n\t\t}\n\t}\n\treturn str\n}\n\n// see: https://stackoverflow.com/a/2901298\n//     return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\nNumber.prototype.toCommaString = function (): string {\n\treturn this.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n}\n\nNumber.prototype.singularPlural = function (singular: string, plural: string): string {\n\treturn `${this} ${this == 1 ? singular : plural}`\n}\n\n// _u functions\n\n/**\n * _u.debug\n * \n * Pass along message and optionalParams to console.log\n * only if we are in a development environment.\n * \n */\nexport function debug(message?: any, ...optionalParams: any[]) {\n\tif (isDebugging()) {\n\t\tconsole.log(message, ...optionalParams)\n\t}\n}\n\nexport function isDebugging(): boolean {\n\treturn !process.env.NODE_ENV || process.env.NODE_ENV === 'development'\n}\n\n/**\n * _u.unwrap...\n * \n * Unwrap the optional value returning either the actual value\n * or a resonable \"empty\" value if it was undefined.\n * \n */\n\nexport function unwrapString(optional?: string, empty = ''): string {\n\tif (optional == undefined) return empty\n\treturn optional\n}\n\nexport function unwrapNumber(optional?: number, empty = 0): number {\n\tif (optional == undefined) return empty\n\treturn optional\n}\n\nexport function unwrapBoolean(optional?: boolean, empty = false): boolean {\n\tif (optional == undefined) return empty\n\treturn optional\n}","export class Subcaucus {\n\n\treadonly id: number\n\tname: string\n\tcount: number\n\tdelegates: number\n\n\tconstructor(withID: number, name = '', count = 0, delegates = 0) {\n\t\tthis.id = withID\n\t\tthis.name = name\n\t\tthis.count = count\n\t\tthis.delegates = delegates\n\t}\n}","import * as React from 'react'\n// see https://github.com/ClickSimply/typescript-map\nimport { TSMap } from 'typescript-map'\n// see https://www.primefaces.org/primereact\nimport { Button } from 'primereact/button'\nimport { Menubar } from 'primereact/menubar';\nimport 'primereact/resources/primereact.min.css'\nimport 'primereact/resources/themes/nova-light/theme.css'\nimport 'primeicons/primeicons.css'\n// local to this app\nimport './App.scss'\nimport * as _u from './Utilities'\nimport { Subcaucus } from './Subcaucus'\nimport { SubcaucusRow, SubcaucusRowAction } from './SubcaucusRow'\nimport { ValueCard } from './ValueCard'\n\nenum SortOrder {\n    None = 0,\n    Ascending,\n    Descending,\n}\n\nenum CardFor {\n    // these cards should be defined in priority order\n    // if stacked, the ones toward the top will be shown first\n    WelcomeAndSetName,\n    ChangingName,\n    ChangingDelegates,\n    RemovingEmpties,\n    ShowingAbout,\n    ShowingBy,\n    ShowingInstructions,\n}\n\ninterface SummaryInfo {\n    count: number\n    delegates: number\n    viability: number\n    revisedViability: number\n    minimumCountForViability: number\n    nonViableCount: number\n}\n\ninterface Props { }\ninterface State {\n    dateCreated: Date\n    name: string\n    allowed: number\n    // card status\n    cards: Array<CardFor>\n    // sorting info\n    sortName: SortOrder\n    sortCount: SortOrder\n    // summary info\n    summary?: SummaryInfo\n}\n\nexport class App extends React.Component<Props, State> {\n\n    subcaucuses = new TSMap<number, Subcaucus>()\n\n    initialCardState: Array<CardFor> = [\n        CardFor.WelcomeAndSetName,\n        CardFor.ChangingDelegates,\n        CardFor.ShowingInstructions\n    ]\n\n    constructor(props: Props) {\n        super(props)\n        this.state = {\n            dateCreated: new Date(),\n            name: '',\n            allowed: 0,\n            // card status\n            cards: this.initialCardState,\n            // sorting info\n            sortName: SortOrder.None,\n            sortCount: SortOrder.None,\n        }\n        if (_u.isDebugging()) {\n            this.addSubcaucus(false, \"C\", 10, 0)\n            this.addSubcaucus(false, \"A\", 0, 0)\n            this.addSubcaucus(false, \"B\", 100, 5)\n            this.addSubcaucus(false, \"D\", 1, 0)\n            this.addSubcaucus(false)\n            this.state = {\n                dateCreated: new Date(),\n                name: 'Debugging', // '' for release\n                allowed: 10, // 0 for release\n                // card status\n                cards: [],\n                // sorting info\n                sortName: SortOrder.None,\n                sortCount: SortOrder.None,\n                // summary info\n                summary: {\n                    count: 1234,\n                    delegates: 256,\n                    viability: 2.124132,\n                    revisedViability: 1.92123,\n                    minimumCountForViability: 3,\n                    nonViableCount: 3,\n                }\n            }\n        } else {\n            this.addSubcaucus(false)\n            this.addSubcaucus(false)\n            this.addSubcaucus(false)\n        }\n    }\n\n    private _currentSubcaucusID = 1\n    nextSubcaucusID = () => this._currentSubcaucusID++\n\n    addSubcaucus = (forceUpdate = true, name = '', count = 0, delegates = 0) => {\n        const newSubcaucus = new Subcaucus(this.nextSubcaucusID(), name, count, delegates)\n        this.subcaucuses.set(newSubcaucus.id, newSubcaucus)\n        if (forceUpdate) this.forceUpdate()\n    }\n\n    defaultName = (): string => {\n        return \"Meeting on \" + this.state.dateCreated.toLocaleDateString(\"en-US\")\n    }\n\n    allowedString = (): string => {\n        return `${this.state.allowed} delegates to be elected`\n    }\n\n    addCard = (cardFor: CardFor, to?: Array<CardFor>): Array<CardFor> => {\n        if (to === undefined) {\n            to = this.state.cards\n        }\n        return [...to, cardFor]\n    }\n\n    addCardState = (cardFor: CardFor) => {\n        this.setState({ cards: this.addCard(cardFor) })\n    }\n\n    removeCard = (seekingCardFor: CardFor, from?: Array<CardFor>): Array<CardFor> => {\n        if (from === undefined) {\n            from = this.state.cards\n        }\n        return from.filter(foundCardFor => foundCardFor != seekingCardFor)\n    }\n\n    removeCardState = (cardFor: CardFor) => {\n        this.setState({ cards: this.removeCard(cardFor) })\n    }\n\n    switchCardState = (fromCardFor: CardFor, toCardFor: CardFor) => {\n        let newCards = this.removeCard(fromCardFor)\n        newCards = this.addCard(toCardFor, newCards)\n        this.setState({ cards: newCards })\n    }\n\n    showingCard = (cardFor: CardFor): boolean => {\n        return this.state.cards.indexOf(cardFor) > -1\n    }\n\n    handleChange = (name: string) => (event: React.FormEvent<HTMLInputElement>) => {\n        switch (name) {\n            case 'allowed':\n                var allowed = Number(event.currentTarget.value)\n                if (allowed < 0) {\n                    allowed = 0\n                }\n                this.setState({ allowed: allowed })\n                break\n            case 'name':\n                this.setState({ name: event.currentTarget.value })\n                break\n        }\n    }\n\n    focusOnWholeText = () => (event: React.FormEvent<HTMLInputElement>) => {\n        const target = event.currentTarget // event properties must be copied to use async\n        setTimeout(() => target.setSelectionRange(0, 9999), 0) // do this async to try to make Safari behave\n    }\n\n    handleSubcaucusChange = (subcaucusID: number, action: SubcaucusRowAction) => {\n        _u.debug(\"subcaucus changed\", subcaucusID, action)\n        switch (action) {\n            case 'remove':\n                this.subcaucuses.filter((subcaucus, key) => {\n                    return key != subcaucusID\n                })\n                this.forceUpdate()\n                return\n            case 'enter':\n                return\n            case 'sync':\n                return this.subcaucuses.get(subcaucusID)\n            default:\n                // this.subcaucuses[id] = changedSubcaucus\n                const subcaucus = this.subcaucuses.get(subcaucusID)\n                subcaucus.name = action.name\n                subcaucus.count = action.count\n                this.forceUpdate()\n                return\n        }\n    }\n\n    removeEmpties = (subset = 'all') => {\n        if (subset == 'all') {\n            this.subcaucuses.filter((subcaucus, key) => {\n                return subcaucus.count > 0\n            })\n        }\n        if (subset == 'unnamed') {\n            this.subcaucuses.filter((subcaucus, k, i) => {\n                _u.debug(\"remove?\", subcaucus.id, subcaucus.count, subcaucus.name, subcaucus.count > 0 || subcaucus.name != '', \"key\", k, \"index\", i)\n                return subcaucus.count > 0 || subcaucus.name != ''\n            })\n        }\n        this.removeCardState(CardFor.RemovingEmpties)\n    }\n\n    sortOrderIcon = (order: SortOrder): string => {\n        return [\"pi pi-circle-off\", \"pi pi-chevron-circle-up\", \"pi pi-chevron-circle-down\"][order]\n    }\n\n    nextSortOrder = (currentOrder: SortOrder, direction = 1): SortOrder => {\n        let nextOrder = (currentOrder + direction) % 3\n        if (nextOrder < 0) {\n            nextOrder += 3 // needed to cycle backwards\n        }\n        return nextOrder\n    }\n\n    renderMenu = (): JSX.Element => {\n        const items = [\n            {\n                label: \"About\",\n                icon: \"pi pi-fw pi-info-circle\",\n                items: [\n                    {\n                        label: \"Minnesota DFL Subcaucus Calculator\",\n                        command: () => this.addCardState(CardFor.ShowingAbout),\n                    },\n                    {\n                        label: \"Instructions\",\n                        command: () => this.addCardState(CardFor.ShowingInstructions),\n                    },\n                ]\n            },\n            {\n                label: \"Meetings\",\n                icon: \"pi pi-fw pi-calendar\",\n                items: [\n                    {\n                        label: \"Save revision\",\n                        icon: \"pi pi-fw pi-clock\",\n                        command: () => alert(\"TODO: create save revision function.\")\n                    },\n                    {\n                        label: \"New meeting\",\n                        icon: \"pi pi-fw pi-calendar-plus\",\n                        command: () => alert(\"TODO: create new meeting function.\")\n                    },\n                    {\n                        label: \"Duplicate meeting\",\n                        icon: \"pi pi-fw pi-clone\",\n                        command: () => alert(\"TODO: create duplicate meeting function.\")\n                    },\n                    {\n                        label: \"Load meeting\",\n                        icon: \"pi pi-fw pi-folder-open\",\n                        command: () => alert(\"TODO: create load meeting function.\")\n                    },\n                    {\n                        label: \"Flip the coin\",\n                        icon: \"pi pi-fw pi-refresh\",\n                        command: () => alert(\"TODO: create coin flip function.\")\n                    },\n                ]\n            },\n            {\n                label: \"Share\",\n                icon: \"pi pi-fw pi-share-alt\",\n                items: [\n                    {\n                        label: \"Email report\",\n                        icon: \"pi pi-fw pi-envelope\",\n                        command: () => alert(\"TODO: create email function.\")\n                    },\n                    {\n                        label: \"Download text\",\n                        icon: \"pi pi-fw pi-align-left\",\n                        command: () => alert(\"TODO: create download text function.\")\n                    },\n                    {\n                        label: \"Download CSV\",\n                        icon: \"pi pi-fw pi-table\",\n                        command: () => alert(\"TODO: create download csv function.\")\n                    },\n                    {\n                        label: \"Download code\",\n                        icon: \"pi pi-fw pi-save\",\n                        command: () => alert(\"TODO: create download code function.\")\n                    },\n                ]\n            },\n        ]\n        return <Menubar model={items} id=\"app-main-menu\" />\n    }\n\n    renderAbout = (): JSX.Element => {\n        return (\n            <ValueCard key=\"about-card\" id=\"about-card\"\n                title=\"Minnesota DFL Subcaucus Calculator\"\n                image=\"dfl.jpg\"\n                onSave={() => this.removeCardState(CardFor.ShowingAbout)}\n                extraButtons={\n                    <Button id=\"show-credits-button\"\n                        label=\"Credits\"\n                        icon=\"pi pi-user\"\n                        className=\"p-button-secondary\"\n                        onClick={() => this.switchCardState(CardFor.ShowingAbout, CardFor.ShowingBy)}\n                    />\n                }\n            >\n                <p>Originally written for <a href=\"http://sd64dfl.org\">SD64 DFL</a>, this app assists convenors of precinct caucuses and conventions in Minnesota. The Minnesota Democratic Farmer Labor (DFL) party uses a wonderful, but bit arcane, “walking subcaucus” process that is simple enough to do, but rather difficult to tabulate.</p>\n                <p>Given the number of delegates your meeting or caucus is allowed to send forward and the number of people in each subcaucus, this calculator determines how many of those delegates each subcaucus will elect. The rules it follows appeared on page 4 of the <a href=\"http://www.sd64dfl.org/more/caucus2014printing/2014-Official-Call.pdf\">DFL 2014 Official Call</a>, including the proper treatment of remainders. It makes the math involved in a walking subcaucus disappear.</p>\n                <p>The app could be used to facilitate a “walking subcaucus” or “<a href=\"https://en.wikipedia.org/wiki/Proportional_representation\">proportional representation</a>” system for any group.</p>\n            </ValueCard>\n        )\n    }\n\n    renderInstructions = (): JSX.Element => {\n        return (\n            <ValueCard key=\"instructions-card\" id=\"instructions-card\"\n                title=\"Fill in the subcaucuses\"\n                image=\"walking.jpg\"\n                onSave={() => this.removeCardState(CardFor.ShowingInstructions)}\n            >\n                <p>Now it is time to fill in the subcaucus information. Just add each subcaucus name and the count of participants. Usually a convention or cacucus will solicit the names of subcaucuses first, feel free to enter them right away without a count. Then people will be encouraged to walk around the room and congregate with the subcaucus that most closely represents their views. When each subcacus reports how many people they attracted, you can enter that as the count for that subcaucus.</p>\n                <p>As soon as you start entering subcaucus counts, the calculator will go to work determining how many delegates each subcaucus will be assigned. You can ignore those numbers until you have finished entering and confirming all the subcaucus counts. When you are done, the delegate numbers can be reported to the chair of your convention or caucus.</p>\n                <p>Since most conventions or caucuses will go through more than one round of \"walking\", you can just keep reusing your subcaucus list for each round. However, you might want to consider these steps at the end of each round:</p>\n                <ul>\n                    <li>Use the \"Meetings\" menu at the top to save a revision after each round of caucusing. This will give you a good record of the whole process.</li>\n                    <li>Use the \"Share\" menu to email a report about each round to the chair of the meeting just so they also have a clear record of the process.</li>\n                </ul>\n                <p>You can always get these instructions back under the \"About\" menu at the top. Have fun!</p>\n            </ValueCard>\n        )\n    }\n\n    renderBy = (): JSX.Element => {\n        return (\n            <ValueCard key=\"by-card\" id=\"by-card\"\n                title=\"Brought to you by Tenseg LLC\"\n                image=\"tenseg.jpg\"\n                onSave={() => this.removeCardState(CardFor.ShowingBy)}\n            >\n                <p>We love the walking subcaucus process and it makes us a bit sad that the squirrelly math required to calculate who gets how many delegate discourages meetings and caucuses from using the process. We hope this calculator makes it easier for you to get to know your neighbors as you work together to change the world!</p>\n                <p>Please check us out at <a href=\"https://tenseg.net\">tenseg.net</a> if you need help building a website or making appropriate use of technology.</p>\n            </ValueCard>\n        )\n    }\n\n    renderWelcomeAndSetName = (): JSX.Element => {\n        return (\n            <ValueCard key=\"name-value\" id=\"name-value\"\n                title=\"Welcome to the Minnesota DFL Subcacus Calculator\"\n                image=\"dfl.jpg\"\n                description='Please start by specifying the name of your meeting here. Most meetings have a name, like the \"Ward 4 Precinct 7 Caucus\" or the \"Saint Paul City Convention\".'\n                value={this.state.name}\n                defaultValue={this.defaultName()}\n                allowEmpty={false}\n                onSave={(value?: string) => {\n                    if (value == undefined) {\n                        this.removeCardState(CardFor.WelcomeAndSetName)\n                    } else {\n                        this.setState({\n                            name: value,\n                            cards: this.removeCard(CardFor.WelcomeAndSetName),\n                        })\n                    }\n                }}\n            />\n        )\n    }\n\n    renderChangingName = (): JSX.Element => {\n        return (\n            <ValueCard key=\"name-value\" id=\"name-value\"\n                title=\"Meeting name?\"\n                value={this.state.name}\n                defaultValue={this.defaultName()}\n                allowEmpty={false}\n                extraButtons={this.state.name\n                    ? <Button id=\"new-meeting-button\"\n                        label=\"New meeting\"\n                        icon=\"pi pi-calendar-plus\"\n                        className=\"p-button-secondary\"\n                        onClick={() => alert(\"TODO: create new meeting function.\")}\n                    />\n                    : <></>\n                }\n                onSave={(value?: string) => {\n                    if (value == undefined) {\n                        this.removeCardState(CardFor.ChangingName)\n                    } else {\n                        this.setState({\n                            name: value,\n                            cards: this.removeCard(CardFor.ChangingName),\n                        })\n                    }\n                }}\n            >\n                <p>You can save a new name for this meeting or, if this is really a new event, you may want to start a new meeting altogether.</p>\n            </ValueCard>\n        )\n    }\n\n    renderChangingDelegates = (): JSX.Element => {\n        return (\n            <ValueCard key=\"delegate-value\" id=\"delegate-value\"\n                title=\"Number of delegates allowed?\"\n                type=\"positive integer\"\n                value={this.state.allowed.toString()}\n                allowEmpty={false}\n                extraButtons={this.state.allowed\n                    ? <Button id=\"new-meeting-button\"\n                        label=\"New meeting\"\n                        icon=\"pi pi-calendar-plus\"\n                        className=\"p-button-secondary\"\n                        onClick={() => alert(\"TODO: create new meeting function.\")}\n                    />\n                    : <></>\n                }\n                onSave={(value?: string) => {\n                    if (value == undefined) {\n                        this.removeCardState(CardFor.ChangingDelegates)\n                    } else {\n                        this.setState({\n                            allowed: Number(value),\n                            cards: this.removeCard(CardFor.ChangingDelegates),\n                        })\n                    }\n                }}\n            >\n                <p>Specify the number of delegates that your meeting or caucus is allowed to send on to the next level. This is the number of delegates to be elected by your meeting.\n                {this.state.allowed\n                        ? <span> If this is actually a new event, you may want to start a new meeting instead</span>\n                        : <></>\n                    }\n                </p>\n            </ValueCard>\n        )\n    }\n\n    renderRemovingEmpties = (): JSX.Element => {\n        return (\n            <ValueCard key=\"remove-empties-card\" id=\"remove-empties-card\"\n                title=\"Remove empty subcaucuses\"\n                footer={\n                    <>\n                        <Button id=\"remove-all-empties-button\"\n                            label=\"Remove All Empties\"\n                            icon=\"pi pi-trash\"\n                            onClick={() => this.removeEmpties()}\n                        />\n                        <Button id=\"remove-some-empties-button\"\n                            label=\"Remove Only Unnamed\"\n                            icon=\"pi pi-trash\"\n                            className=\"p-button-warning\"\n                            onClick={() => this.removeEmpties('unnamed')}\n                        />\n                        <Button id=\"cancel-remove-button\"\n                            label=\"Cancel\"\n                            icon=\"pi pi-times\"\n                            className=\"p-button-secondary\"\n                            onClick={() => this.removeCardState(CardFor.RemovingEmpties)}\n                        />\n                    </>\n                }\n            >\n                <p>An \"empty\" subcaucus is one with no participants &mdash; a zero count.</p>\n                <p>You can choose to remove all empty subcaucuses, or only those which also have no names.</p>\n            </ValueCard>\n        )\n    }\n\n    renderNextCard = (): JSX.Element => {\n        return this.state.cards.sort((a, b) => b - a).reduce((accumulator: JSX.Element, cardFor: CardFor): JSX.Element => {\n            _u.debug(\"filtering cards\", accumulator, cardFor)\n            switch (cardFor) {\n                case CardFor.WelcomeAndSetName: return this.renderWelcomeAndSetName()\n                case CardFor.ShowingInstructions: return this.renderInstructions()\n                case CardFor.ShowingAbout: return this.renderAbout()\n                case CardFor.ShowingBy: return this.renderBy()\n                case CardFor.ChangingName: return this.renderChangingName()\n                case CardFor.ChangingDelegates: return this.renderChangingDelegates()\n                case CardFor.RemovingEmpties: return this.renderRemovingEmpties()\n            }\n            return accumulator\n        }, <></>)\n    }\n\n    renderSubcaucusRows = (): JSX.Element[] => {\n        // determine how the subcaucus rows should be sorted\n        let sort = (a: Subcaucus, b: Subcaucus) => {\n            return a.id - b.id\n        }\n\n        if (this.state.sortName != SortOrder.None) {\n            sort = (a: Subcaucus, b: Subcaucus) => {\n                const direction = this.state.sortName == SortOrder.Ascending ? 1 : -1\n                // fall back to order of entry\n                let comparison = a.id - b.id\n                const nameA = a.name ? a.name.toUpperCase() : `SUBCAUCUS ${a.id}`;\n                const nameB = b.name ? b.name.toUpperCase() : `SUBCAUCUS ${b.id}`;\n                if (nameA < nameB) {\n                    comparison = -1;\n                }\n                if (nameA > nameB) {\n                    comparison = 1;\n                }\n                return comparison * direction\n            }\n        }\n\n        if (this.state.sortCount != SortOrder.None) {\n            sort = (a: Subcaucus, b: Subcaucus) => {\n                const direction = this.state.sortCount == SortOrder.Ascending ? 1 : -1\n                // fall back to order of entry or names\n                let comparison = a.id - b.id\n                const nameA = a.name ? a.name.toUpperCase() : `SUBCAUCUS ${a.id}`;\n                const nameB = b.name ? b.name.toUpperCase() : `SUBCAUCUS ${b.id}`;\n                if (nameA < nameB) {\n                    comparison = -1;\n                }\n                if (nameA > nameB) {\n                    comparison = 1;\n                }\n                // start with delegates, then check on count, then fall back if needed\n                let countComparison = a.delegates - b.delegates\n                if (countComparison == 0) {\n                    countComparison = a.count - b.count\n                }\n                if (countComparison == 0) {\n                    return comparison\n                }\n                return countComparison * direction\n            }\n        }\n\n        return this.subcaucuses.values().sort(sort).map((subcaucus): JSX.Element => {\n            return (\n                <SubcaucusRow key={subcaucus.id}\n                    id={subcaucus.id}\n                    exchange={this.handleSubcaucusChange}\n                />\n            )\n        })\n    }\n\n    renderSummary = (): JSX.Element => {\n        const { summary } = this.state\n\n        return ((summary)\n            ? <div id=\"summary-container\">\n                <div className=\"summary-row\">\n                    <div className=\"summary-label\">\n                        Total participants and delegates elected\n                    </div>\n                    <div className=\"summary-count\">\n                        {summary.count.toCommaString()}\n                    </div>\n                    <div className=\"summary-delegates\">\n                        {summary.delegates.toCommaString()}\n                    </div>\n                </div>\n                <div className=\"summary-row\">\n                    <div className=\"summary-label\">\n                        Minimum of <strong>{summary.minimumCountForViability.singularPlural(\"person\", \"people\")}</strong> needed to make a subcaucus viable\n                    </div>\n                </div>\n                <div className=\"summary-row\">\n                    <div className=\"summary-label\">\n                        Viability number\n                    </div>\n                    <div className=\"summary-count\">\n                        {Math.round(summary.viability * 1000) / 1000}\n                    </div>\n                </div>\n                {summary.nonViableCount\n                    ? <div className=\"summary-row clickable\"\n                        onClick={() => alert(\"TODO: explain viability in more detail.\")}\n                    >\n                        <div className=\"summary-label\">\n                            Recalculated viability number ({summary.nonViableCount.singularPlural(\"person\", \"people\")} in non-viable subcaucuses)\n                        </div>\n                        <div className=\"summary-count\">\n                            {Math.round(summary.revisedViability * 1000) / 1000}\n                        </div>\n                    </div>\n                    : ''\n                }\n            </div>\n            : <div id=\"summary-container\">\n                <div className=\"summary-row\">\n                    <div className=\"summary-label\">\n                        To get a \"viability number\" just put the count of all the people in the room into a single subcaucus.\n                    </div>\n                </div>\n            </div>\n        )\n    }\n\n    render() {\n\n        _u.debug(\"rendering\", this.subcaucuses)\n\n        const menu = this.renderMenu()\n        const subcaucusRows = this.renderSubcaucusRows()\n        const summary = this.renderSummary()\n        const card = this.renderNextCard()\n\n        const { name, sortName, sortCount } = this.state\n\n        return (\n            <div id=\"app\">\n                <div id=\"app-content\">\n                    {menu}\n                    <div id=\"meeting-info\">\n                        <Button id=\"meeting-name\"\n                            label={name ? name : this.defaultName()}\n                            onClick={() => this.addCardState(CardFor.ChangingName)}\n                        />\n                        <Button id=\"delegates-allowed\"\n                            label={this.allowedString()}\n                            onClick={() => this.addCardState(CardFor.ChangingDelegates)}\n                        />\n                    </div>\n                    <div id=\"subcaucus-container\">\n                        <div id=\"subcaucus-header\">\n                            <Button id=\"subcaucus-name-head\"\n                                label=\"Subcaucus\"\n                                icon={this.sortOrderIcon(sortName)}\n                                onClick={() => this.setState({\n                                    sortName: this.nextSortOrder(sortName),\n                                    sortCount: SortOrder.None\n                                })}\n                            />\n                            <Button id=\"subcaucus-count-head\"\n                                label=\"Count\"\n                                iconPos=\"right\"\n                                icon={this.sortOrderIcon(sortCount)}\n                                onClick={() => this.setState({\n                                    sortName: SortOrder.None,\n                                    sortCount: this.nextSortOrder(sortCount, -1)\n                                })}\n                            />\n                            <Button id=\"subcaucus-delegate-head\"\n                                label=\"Dels\"\n                            />\n                        </div>\n                        <div id=\"subcaucus-list\">\n                            {subcaucusRows}\n                        </div>\n                        <div id=\"subcaucus-footer\">\n                            <Button id=\"add-subcaucus-button\"\n                                label=\"Add a Subcaucus\"\n                                icon=\"pi pi-plus\"\n                                onClick={() => this.addSubcaucus()}\n                            />\n                            <Button id=\"remove-empty-subcaucuses-button\"\n                                label=\"Remove Empties\"\n                                icon=\"pi pi-trash\"\n                                onClick={() => this.addCardState(CardFor.RemovingEmpties)}\n                            />\n                        </div>\n                    </div>\n                    {summary}\n                    <Button id=\"app-byline\"\n                        label=\"Brought to you by Tenseg LLC\"\n                        href=\"https://tenseg.net\"\n                        onClick={() => this.addCardState(CardFor.ShowingBy)}\n                    />\n                    {card}\n                </div>\n                {_u.isDebugging()\n                    ? <div className=\"debugging\">\n                        <pre>{\"rendered App \" + (new Date()).toLocaleTimeString()}</pre>\n                        <pre>{\"this.state is \" + JSON.stringify(this.state, null, 2)}</pre>\n                        <pre>{\"this.subcaucuses is \" + JSON.stringify(this.subcaucuses, null, 2)}</pre>\n                    </div>\n                    : <></>\n                }\n            </div>\n        )\n    }\n}\n","import * as React from 'react'\n// see https://www.primefaces.org/primereact\nimport { Button } from 'primereact/button'\nimport { InputText } from 'primereact/inputtext'\nimport { InputTextarea } from 'primereact/inputtextarea'\n// local to this app\nimport * as _u from './Utilities'\nimport { Subcaucus } from './Subcaucus'\n\nexport type SubcaucusRowAction = 'sync' | 'enter' | State\n\ninterface Props {\n\tid: number\n\texchange: ((subcaucusID: number, action: SubcaucusRowAction) => Subcaucus | undefined)\n}\n\ninterface State {\n\tname: string\n\tcount: number\n\tdelegates: number\n}\n\nexport class SubcaucusRow extends React.Component<Props, State> {\n\n\tconstructor(props: Props) {\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tname: '',\n\t\t\tcount: 0,\n\t\t\tdelegates: 0,\n\t\t}\n\t\tconst subcaucus = this.props.exchange(this.props.id, 'sync')\n\t\tif (subcaucus) {\n\t\t\tthis.state = {\n\t\t\t\tname: subcaucus.name,\n\t\t\t\tcount: subcaucus.count,\n\t\t\t\tdelegates: subcaucus.delegates\n\t\t\t}\n\t\t}\n\t}\n\n\t// static getDerivedStateFromProps(nextProps: Props, prevState: State) {\n\t// \tlet newState = {}\n\t// \tconst subcaucus = nextProps.exchange(nextProps.id, 'sync')\n\t// \tif (subcaucus) {\n\t// \t\tnewState = {\n\t// \t\t\tname: subcaucus.name,\n\t// \t\t\tcount: subcaucus.count,\n\t// \t\t\tdelegates: subcaucus.delegates\n\t// \t\t}\n\t// \t}\n\t// \treturn newState\n\t// }\n\n\thandleName = () => (event: React.FormEvent<HTMLTextAreaElement>) => {\n\t\tvar value = event.currentTarget.value\n\t\tthis.setState({ name: value })\n\t\tthis.props.exchange(this.props.id, { ...this.state, name: value })\n\t}\n\n\thandleCount = () => (event: React.FormEvent<HTMLInputElement>) => {\n\t\tvar num = Number(event.currentTarget.value)\n\t\tif (num < 0) {\n\t\t\tnum = 0\n\t\t}\n\t\tthis.setState({ count: num })\n\t}\n\n\tnotify = () => (event: React.FormEvent<HTMLInputElement>) => {\n\t\tthis.props.exchange(this.props.id, { ...this.state })\n\t}\n\n\thandleKey = () => (event: React.KeyboardEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n\t\tif (event.key === 'Enter' || event.key === 'Tab') {\n\t\t\tthis.props.exchange(this.props.id, 'enter')\n\t\t}\n\t}\n\n\tfocusOnWholeText = () => (event: React.FormEvent<HTMLInputElement>) => {\n\t\t// event properties must be copied to use async\n\t\tconst target = event.currentTarget\n\t\t// do this async to try to make Safari behave\n\t\tsetTimeout(() => target.setSelectionRange(0, 9999), 0)\n\t}\n\n\tidPlus = (suffix: string): string | undefined => {\n\t\treturn `subcaucus-${this.props.id}-${suffix}`\n\t}\n\n\trender() {\n\t\t_u.debug(\"render row\", this.props.id, this.state)\n\n\t\tconst { name, count, delegates } = this.state\n\n\t\treturn (\n\t\t\t<div id={this.idPlus(\"row\")}\n\t\t\t\tclassName={`subcaucus-row ${delegates > 0 ? \"has-delegates\" : (count > 0 ? \"no-delegates\" : \"\")}`}\n\t\t\t>\n\t\t\t\t{_u.isDebugging ? <div className=\"subcaucus-id\">{this.props.id}</div> : ''}\n\t\t\t\t<InputTextarea id={this.idPlus(\"row-name\")}\n\t\t\t\t\tclassName=\"subcaucus-field subcaucus-name\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tvalue={name}\n\t\t\t\t\trows={1}\n\t\t\t\t\tcols={1}\n\t\t\t\t\t// PrimeReact has a bug with the InputTextarea placeholder\n\t\t\t\t\t// for now, it will not update this placeholder\n\t\t\t\t\t// see: https://github.com/primefaces/primereact/issues/747\n\t\t\t\t\tplaceholder={`Subcaucus ${this.props.id}`}\n\t\t\t\t\t// placeholder={`Subcaucus name`}\n\t\t\t\t\tonChange={this.handleName()}\n\t\t\t\t\tonKeyUp={this.handleKey()}\n\t\t\t\t/>\n\t\t\t\t<InputText id={this.idPlus(\"row-count\")}\n\t\t\t\t\tclassName=\"subcaucus-field subcaucus-count\"\n\t\t\t\t\tkeyfilter=\"pint\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tpattern=\"\\d*\"\n\t\t\t\t\tvalue={count ? count : ''}\n\t\t\t\t\tplaceholder={`—`}\n\t\t\t\t\tonChange={this.handleCount()}\n\t\t\t\t\tonBlur={this.notify()}\n\t\t\t\t\t// forcing the selction of the whole text seems to lead to problems\n\t\t\t\t\t// see https://grand.clst.org:3000/tenseg/subcalc-pr/issues/3\n\t\t\t\t\t// onFocus={this.focusOnWholeText()}\n\t\t\t\t\tonKeyUp={this.handleKey()}\n\t\t\t\t/>\n\t\t\t\t<Button id={this.idPlus(\"row-delegates\")}\n\t\t\t\t\tclassName={`subcaucus-delegates-button ${delegates > 0 ? \"p-button-success\" : \"p-button-secondary\"}`}\n\t\t\t\t\tlabel={`${delegates ? delegates : (count ? \"0\" : \"—\")}`}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t)\n\t}\n}\n","import * as React from 'react'\n// see https://www.primefaces.org/primereact\nimport { Button } from 'primereact/button'\nimport { Card } from 'primereact/card'\nimport { InputText } from 'primereact/inputtext'\n// local to this app\nimport * as _u from './Utilities'\n\ntype KindOfValue = 'text' | 'positive integer'\n\ninterface Props {\n    id?: string\n    title: string\n    description?: string\n    image?: string\n    alt?: string\n    extraButtons?: JSX.Element\n    footer?: JSX.Element\n    type?: KindOfValue\n    value?: string\n    defaultValue?: string\n    allowEmpty?: boolean\n    onSave?: ((value?: string) => void)\n}\ninterface State {\n    value: string\n}\n\nexport class ValueCard extends React.Component<Props, State> {\n\n    isPositiveInteger = false\n\n    constructor(props: Props) {\n        super(props)\n        this.isPositiveInteger = this.props.type === 'positive integer'\n        let initialValue = _u.unwrapString(this.props.value)\n        if (!this.props.allowEmpty && this.isEmpty(initialValue)) {\n            initialValue = _u.unwrapString(this.props.defaultValue)\n        }\n        this.state = {\n            value: initialValue,\n        }\n    }\n\n    originalValue = (): string => {\n        return _u.unwrapString(this.props.value)\n    }\n\n    defaultValue = (): string => {\n        return _u.unwrapString(this.props.defaultValue)\n    }\n\n    handleChange = () => (event: React.FormEvent<HTMLInputElement>) => {\n        _u.debug(\"change\", event.currentTarget.value)\n        if (this.isPositiveInteger) {\n            var num = Number(event.currentTarget.value)\n            if (num < 0) {\n                num = 0\n            }\n            this.setState({ value: String(num) })\n        } else {\n            this.setState({ value: event.currentTarget.value })\n        }\n    }\n\n    handleKey = () => (event: React.KeyboardEvent<HTMLInputElement>) => {\n        if (event.key === 'Enter') {\n            if (this.props.onSave) {\n                this.props.onSave(this.state.value.trim())\n            }\n        }\n    }\n\n    focusOnWholeText = () => (event: React.FormEvent<HTMLInputElement>) => {\n        // event properties must be copied to use async\n        const target = event.currentTarget\n        // do this async to try to make Safari behave\n        setTimeout(() => target.setSelectionRange(0, 9999), 0)\n    }\n\n    isEmpty = (value?: string): boolean => {\n        var empty = (value === '') || (value === undefined)\n        if (this.isPositiveInteger) {\n            empty = (empty || value === '0')\n        }\n        return empty\n    }\n\n    save = (value?: string) => (event: React.MouseEvent<HTMLButtonElement>) => {\n        if (this.props.onSave) {\n            if (value === undefined) {\n                this.props.onSave()\n            } else if (this.isEmpty(value) && !this.props.allowEmpty) {\n                if (!this.isEmpty(this.props.defaultValue)) {\n                    this.props.onSave(this.props.defaultValue)\n                }\n            } else {\n                this.props.onSave(value.trim())\n            }\n        }\n    }\n\n    idPlus = (suffix: string): string | undefined => {\n        return this.props.id ? `${this.props.id}-${suffix}` : undefined\n    }\n\n    render() {\n\n        const { value } = this.state\n        const isPositiveInteger = this.isPositiveInteger\n\n        let cardFooter = <></>\n\n        if (this.props.footer == undefined) {\n            const illegallyEmpty = (this.isEmpty(value) && this.isEmpty(this.defaultValue()) && this.props.allowEmpty === false)\n            const originalIllegallyEmpty = (this.isEmpty(this.originalValue()) && this.props.allowEmpty === false)\n\n            // don't show a save button at all if there is no save function\n            // and if there is no value property, then call the save button \"close\" instead\n            const saveButton = (this.props.onSave\n                ? ((this.props.value != undefined)\n                    ? <Button id={this.idPlus(\"save-button\")}\n                        label=\"Save\"\n                        icon=\"pi pi-check\"\n                        disabled={illegallyEmpty}\n                        onClick={this.save(_u.unwrapString(value, this.defaultValue()))}\n                    />\n                    : <Button id={this.idPlus(\"close-button\")}\n                        label=\"Close\"\n                        icon=\"pi pi-times\"\n                        onClick={this.save()}\n                    />\n                )\n                : <></>\n            )\n\n            const cancelButton = originalIllegallyEmpty || this.props.value === undefined\n                ? ''\n                : <Button id={this.idPlus(\"cancel-button\")}\n                    label=\"Cancel\"\n                    icon=\"pi pi-times\"\n                    className=\"p-button-secondary\"\n                    onClick={this.save()}\n                />\n\n            cardFooter = <>{saveButton}{this.props.extraButtons}{cancelButton}</>\n        } else {\n            cardFooter = this.props.footer\n        }\n\n        return (\n            <div className=\"valuecard-wrapper\">\n                <div className=\"background-blocker\">\n                </div>\n                <Card id={this.idPlus(\"valuecard\")}\n                    className={`valuecard ${this.idPlus(\"valuecard\")}`}\n                    title={this.props.title}\n                    header={this.props.image\n                        ? <div id={this.idPlus(\"picture-container\")}\n                            className=\"picture-container\"\n                        >\n                            <img\n                                alt={`${this.props.alt}`}\n                                src={`${this.props.image}`}\n                            />\n                            <Button\n                                id={this.idPlus(\"picture-close-button\")}\n                                icon=\"pi pi-times\"\n                                onClick={this.save()}\n                            />\n                        </div>\n                        : undefined\n                    }\n                    footer={cardFooter}\n                >\n                    {this.props.children\n                        ? <div id={this.idPlus(\"valuecard-children\")} className=\"valuecard-children\">\n                            {this.props.children}\n                        </div>\n                        : ''}\n                    {this.props.description\n                        ? <div id={this.idPlus(\"valuecard-description\")} className=\"valuecard-description\">\n                            <p>{this.props.description}</p>\n                        </div>\n                        : ''}\n                    {this.props.value != undefined\n                        ? <InputText id={this.idPlus(\"card-field\")}\n                            className={isPositiveInteger ? \"number\" : \"text\"}\n                            keyfilter={isPositiveInteger ? \"pint\" : \"\"}\n                            type=\"text\"\n                            pattern={isPositiveInteger ? \"\\\\d*\" : undefined}\n                            value={isPositiveInteger ? (value === '0' ? '' : value) : value} // show 0 as blank for positive integers\n                            placeholder={this.props.defaultValue}\n                            onChange={this.handleChange()}\n                            // onFocus={this.isPositiveInt ? this.focusOnWholeText() : undefined}\n                            onKeyUp={this.handleKey()}\n                            autoFocus\n                        />\n                        : ''\n                    }\n                </Card>\n            </div>\n        )\n    }\n}\n","// tslint:disable:no-console\n// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the 'N+1' visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL!,\n      window.location.toString()\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (!isLocalhost) {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      } else {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker) {\n          installingWorker.onstatechange = () => {\n            if (installingWorker.state === 'installed') {\n              if (navigator.serviceWorker.controller) {\n                // At this point, the old content will have been purged and\n                // the fresh content will have been added to the cache.\n                // It's the perfect time to display a 'New content is\n                // available; please refresh.' message in your web app.\n                console.log('New content is available; please refresh.');\n              } else {\n                // At this point, everything has been precached.\n                // It's the perfect time to display a\n                // 'Content is cached for offline use.' message.\n                console.log('Content is cached for offline use.');\n              }\n            }\n          };\n        }\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type')!.indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport { App } from './App';\nimport registerServiceWorker from './registerServiceWorker';\nimport './index.css';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root') as HTMLElement\n);\nregisterServiceWorker();\n"],"sourceRoot":""}