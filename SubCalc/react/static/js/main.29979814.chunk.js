(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t,n){e.exports=n(41)},36:function(e,t,n){},39:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n(10),s=n(16),o=n(2),u=n(3),c=n(5),r=n(4),l=n(6),d=n(1),h=n(14),p=n(7);function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return void 0==e?t:e}String.prototype.trim=function(){for(var e=this.replace(/^\s+/,""),t=e.length-1;t>=0;t--)if(/\S/.test(e.charAt(t))){e=e.substring(0,t+1);break}return e};var g=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(r.a)(t).call(this,e))).type="text",n.isPositiveInt=!1,n.originalValue="",n.defaultValue="",n.textFieldRef=a.createRef(),n.handleChange=function(){return function(e){switch(n.type){case"positive integer":var t=Number(e.currentTarget.value);t<0&&(t=0),n.setState({value:String(t)});break;case"text":n.setState({value:e.currentTarget.value})}}},n.handleKey=function(){return function(e){"Enter"===e.key&&n.props.onSave&&n.props.onSave(n.state.value.trim())}},n.focusOnWholeText=function(){return function(e){var t=e.currentTarget;setTimeout(function(){return t.setSelectionRange(0,9999)},0)}},n.isEmpty=function(e){var t=""==e;return"positive integer"==n.props.type&&(t=t||"0"==e),t},n.save=function(e){return function(t){n.props.onSave&&(null==e?n.props.onSave():n.props.onSave(e.trim()))}},n.componentDidMount=function(){var e=i.findDOMNode(n.textFieldRef.current);if(n.textFieldRef.current instanceof p.InputText&&null!=e)switch(n.type){case"text":case"positive integer":try{e.select()}catch(t){console.log("oops")}}},n.idPlus=function(e){return n.props.id?"".concat(n.props.id,"-").concat(e):void 0},n.type=void 0==n.props.type?"text":n.props.type,n.isPositiveInt="positive integer"==n.type,n.originalValue=m(n.props.value),n.defaultValue=m(n.props.defaultValue),n.state={value:n.originalValue},n}return Object(l.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.isEmpty(this.state.value)&&this.isEmpty(this.defaultValue)&&!this.props.allowEmpty,t=void 0!=this.props.value?a.createElement(d.Button,{id:this.idPlus("save-button"),label:"Save",icon:"pi pi-check",disabled:e,onClick:this.save(m(this.state.value,this.defaultValue))}):a.createElement(d.Button,{id:this.idPlus("close-button"),label:"Close",icon:"pi pi-times",onClick:this.save(null)}),n=this.isEmpty(this.originalValue)||!this.props.value?a.createElement(a.Fragment,null):a.createElement(d.Button,{id:this.idPlus("cancel-button"),label:"Cancel",icon:"pi pi-times",className:"p-button-secondary",onClick:this.save(null)}),i=a.createElement("span",null,t,n);return a.createElement("div",{className:"valuecard-wrapper"},a.createElement("div",{className:"background-blocker"}),a.createElement(h.Card,{id:this.idPlus("valuecard"),className:"valuecard ".concat(this.idPlus("valuecard")),title:this.props.title,header:this.props.image?a.createElement("div",{id:this.idPlus("picture-container"),className:"picture-container"},a.createElement("img",{alt:"".concat(this.props.alt),src:"".concat(this.props.image)}),a.createElement(d.Button,{id:this.idPlus("picture-close-button"),icon:"pi pi-times",onClick:this.save(null)})):void 0,footer:i},this.props.children?a.createElement("div",{id:this.idPlus("valuecard-children"),className:"valuecard-children"},this.props.children):a.createElement(a.Fragment,null),this.props.description?a.createElement("div",{id:this.idPlus("valuecard-description"),className:"valuecard-description"},a.createElement("p",null,this.props.description)):a.createElement(a.Fragment,null),void 0!=this.props.value?a.createElement(p.InputText,{id:this.idPlus("card-field"),className:this.isPositiveInt?"number":"text",keyfilter:this.isPositiveInt?"pint":"",type:"text",pattern:this.isPositiveInt?"\\d*":void 0,value:this.state.value,placeholder:this.defaultValue,onChange:this.handleChange(),onFocus:this.isPositiveInt?this.focusOnWholeText():void 0,onKeyUp:this.handleKey(),ref:this.textFieldRef}):a.createElement(a.Fragment,null)))}}]),t}(a.Component),f=(n(30),n(32),n(34),n(36),function e(t){Object(o.a)(this,e),this.id=void 0,this.name="",this.count=0,this.delegates=0,this.id=t}),b=n(17),v=n(15),w=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(r.a)(t).call(this,e))).subcaucus=void 0,n.handleName=function(){return function(e){var t=e.currentTarget.value;n.subcaucus.name=t.trim(),n.setState({name:t}),n.props.onChange&&n.props.onChange(n.subcaucus)}},n.handleCount=function(){return function(e){var t=Number(e.currentTarget.value);t<0&&(t=0),n.subcaucus.count=t,n.setState({count:t}),n.props.onChange&&n.props.onChange(n.subcaucus)}},n.handleKey=function(){return function(e){"Enter"===e.key&&n.props.onChange&&n.props.onChange(n.subcaucus,"enter")}},n.focusOnWholeText=function(){return function(e){var t=e.currentTarget;setTimeout(function(){return t.setSelectionRange(0,9999)},0)}},n.remove=function(){return function(e){n.props.onChange&&n.props.onChange(n.subcaucus,"remove")}},n.idPlus=function(e){return"subcaucus-".concat(n.subcaucus.id,"-").concat(e)},n.subcaucus=Object(b.a)({},n.props.subcaucus),n.state={id:n.subcaucus.id,name:n.subcaucus.name,count:n.subcaucus.count,delegates:n.subcaucus.delegates},n}return Object(l.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.name,n=e.count,i=e.delegates;return a.createElement("div",{id:this.idPlus("row"),className:"subcaucus-row"},a.createElement(d.Button,{id:this.idPlus("row-remove-button"),className:"subcaucus-remove-button p-button-danger",icon:"pi pi-minus"}),a.createElement(v.InputTextarea,{id:this.idPlus("row-name"),className:"subcaucus-field subcaucus-name",type:"text",value:t,rows:1,cols:1,placeholder:"Subcaucus ".concat(this.state.id),onChange:this.handleName(),onKeyUp:this.handleKey()}),a.createElement(p.InputText,{id:this.idPlus("row-count"),className:"subcaucus-field subcaucus-count",keyfilter:"pint",type:"text",pattern:"\\\\d*",value:n||"",placeholder:"\u2014",onChange:this.handleCount(),onFocus:this.focusOnWholeText(),onKeyUp:this.handleKey()}),a.createElement(d.Button,{id:this.idPlus("row-delegates"),className:"subcaucus-delegates-button ".concat(i>0?"has-delegates p-button-success":"p-button-secondary"),label:"".concat(i)}))}}]),t}(a.Component),y=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(r.a)(t).call(this,e)))._currentSubcaucusID=1,n.nextSubcaucusID=function(){return n._currentSubcaucusID++},n.defaultName=function(){return"Meeting on "+n.state.dateCreated.toLocaleDateString("en-US")},n.allowedString=function(){return"".concat(n.state.allowed," delegates to be elected")},n.handleChange=function(e){return function(t){switch(e){case"allowed":var a=Number(t.currentTarget.value);a<0&&(a=0),n.setState({allowed:a});break;case"name":n.setState({name:t.currentTarget.value})}}},n.focusOnWholeText=function(){return function(e){var t=e.currentTarget;setTimeout(function(){return t.setSelectionRange(0,9999)},0)}},n.state={name:"Debugging",allowed:10,dateCreated:new Date,changingName:!1,changingDelegates:!1,showingAbout:!1,showingBy:!1,subcaucuses:[new f(n.nextSubcaucusID()),new f(n.nextSubcaucusID()),new f(n.nextSubcaucusID())]},n}return Object(l.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=a.createElement(a.Fragment,null);this.state.showingAbout&&(t=a.createElement(g,{id:"about-card",title:"Minnesota DFL Subcaucus Calculator",image:"dfl.jpg",onSave:function(){return e.setState({showingAbout:!1})}},a.createElement("p",null,"Originally written for ",a.createElement("a",{href:"http://sd64dfl.org"},"SD64 DFL"),", this app assists convenors of precinct caucuses and conventions in Minnesota. The Minnesota Democratic Farmer Labor (DFL) party uses a wonderful, but bit arcane, \u201cwalking subcaucus\u201d process that is simple enough to do, but rather difficult to tabulate."),a.createElement("p",null,"Given the number of delegates your meeting or caucus is allowed to send forward and the number of people in each subcaucus, this calculator determines how many of those delegates each subcaucus will elect. The rules it follows appeared on page 4 of the ",a.createElement("a",{href:"http://www.sd64dfl.org/more/caucus2014printing/2014-Official-Call.pdf"},"DFL 2014 Official Call"),", including the proper treatment of remainders. It makes the math involved in a walking subcaucus disappear."),a.createElement("p",null,"The app could be used to facilitate a \u201cwalking subcaucus\u201d or \u201c",a.createElement("a",{href:"https://en.wikipedia.org/wiki/Proportional_representation"},"proportional representation"),"\u201d system for any group."))),this.state.showingBy&&(t=a.createElement(g,{id:"by-card",title:"Brought to you by Tenseg LLC",image:"tenseg.jpg",onSave:function(){return e.setState({showingBy:!1})}},a.createElement("p",null,"We love the walking subcaucus process and it makes us a bit sad that the squirrelly math required to calculate who gets how many delegate discourages meetings and caucuses from using the process. We hope this calculator makes it easier for you to get to know your neighbors as you work together to change the world!"),a.createElement("p",null,"Please check us out at ",a.createElement("a",{href:"https://tenseg.net"},"tenseg.net")," if you need help building a website or making appropriate use of technology."))),this.state.allowed&&!this.state.changingDelegates||(t=a.createElement(g,{id:"delegate-value",title:"Number of delegates allowed?",description:"Specify the number of delegates that your meeting or caucus is allowed to send on to the next level. This is the number of delegates to be elected by your meeting.",type:"positive integer",value:this.state.allowed.toString(),onSave:function(t){void 0==t?e.setState({changingDelegates:!1}):e.setState({allowed:Number(t),changingDelegates:!1})}})),(""==this.state.name||this.state.changingName)&&(t=a.createElement(g,{id:"name-value",title:"What is the name of your meeting?",description:'Most meetings have a name, like the "Ward 4 Precinct 7 Caucus" or the "Saint Paul City Convention". Specify the name of your meeting here.',value:this.state.name?this.state.name:this.defaultName(),defaultValue:this.defaultName(),onSave:function(t){void 0==t?e.setState({changingName:!1}):e.setState({name:t,changingName:!1})}}));var n=this.state.subcaucuses.map(function(e,t,n){return a.createElement(w,{subcaucus:e})});return a.createElement("div",{id:"app"},a.createElement("div",{id:"app-content"},a.createElement(d.Button,{id:"app-about-button",label:"Minnesota DFL Subcaucus Calculator",icon:"pi pi-info-circle",iconPos:"right",onClick:function(){return e.setState({showingAbout:!0})}}),a.createElement("div",{id:"meeting-info"},a.createElement(d.Button,{id:"meeting-name",label:this.state.name?this.state.name:this.defaultName(),onClick:function(){return e.setState({changingName:!0})}}),a.createElement(d.Button,{id:"delegates-allowed",label:this.allowedString(),onClick:function(){return e.setState({changingDelegates:!0})}})),a.createElement("div",{id:"subcaucus-container"},a.createElement("div",{id:"subcaucus-header"},a.createElement(d.Button,{id:"subcaucus-management-head",label:"\xa0",disabled:!0}),a.createElement(d.Button,{id:"subcaucus-name-head",label:"Subcaucus",icon:"pi pi-circle-off"}),a.createElement(d.Button,{id:"subcaucus-count-head",label:"Count",iconPos:"right",icon:"pi pi-circle-off"}),a.createElement(d.Button,{id:"subcaucus-delegate-head",label:"Del"})),a.createElement("div",{id:"subcaucus-list"},n),a.createElement(d.Button,{id:"add-subcaucus-button",label:"Add a Subcaucus",icon:"pi pi-plus",onClick:function(){return e.setState({subcaucuses:[].concat(Object(s.a)(e.state.subcaucuses),[new f(e.nextSubcaucusID())])})}})),a.createElement(d.Button,{id:"app-byline",label:"Brought to you by Tenseg LLC",href:"https://tenseg.net",onClick:function(){return e.setState({showingBy:!0})}}),t))}}]),t}(a.Component),E=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function S(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}n(39);i.render(a.createElement(y,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL(".",window.location.toString()).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat(".","/service-worker.js");E?function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):S(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e):S(e)})}}()}},[[18,2,1]]]);
//# sourceMappingURL=main.29979814.chunk.js.map